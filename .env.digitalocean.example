# Digital Ocean App Platform Environment Configuration
# Configure these environment variables in Digital Ocean App Platform dashboard

# Application Configuration
NODE_ENV=production
PORT=3000
TZ=UTC
APP_NAME=NodeAngularFullStack
LOG_LEVEL=info

# Digital Ocean Database (Auto-provided by App Platform)
# These are automatically set by Digital Ocean when you attach a database
DATABASE_URL=${postgres-db.DATABASE_URL}
DB_SSL=true

# Redis Cache (Auto-provided by App Platform)
# These are automatically set by Digital Ocean when you attach Redis
REDIS_URL=${redis.DATABASE_URL}

# JWT Authentication Secrets (REQUIRED - Set in App Platform Secrets)
# Generate using: openssl rand -base64 64
JWT_SECRET=${JWT_SECRET}
JWT_REFRESH_SECRET=${JWT_REFRESH_SECRET}
JWT_EXPIRES_IN=1800
JWT_REFRESH_EXPIRES_IN=604800

# Frontend URL (Auto-provided by App Platform)
FRONTEND_URL=https://nodeangularfullstack-web.ondigitalocean.app
CORS_ORIGINS=https://nodeangularfullstack-web.ondigitalocean.app

# Digital Ocean Spaces Configuration
DO_SPACES_ENDPOINT=nyc3.digitaloceanspaces.com
DO_SPACES_KEY=${DO_SPACES_KEY}
DO_SPACES_SECRET=${DO_SPACES_SECRET}
DO_SPACES_BUCKET=nodeangularfullstack-storage
DO_SPACES_REGION=nyc3

# Email Service (SendGrid)
SENDGRID_API_KEY=${SENDGRID_API_KEY}
EMAIL_FROM=noreply@your-domain.com
EMAIL_FROM_NAME=NodeAngularFullStack

# Monitoring and Logging
SENTRY_DSN=${SENTRY_DSN}
LOGTAIL_TOKEN=${LOGTAIL_TOKEN}

# Rate Limiting (Production Settings)
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# Security Configuration
API_KEY=${API_KEY}
ENCRYPTION_KEY=${ENCRYPTION_KEY}

# Multi-tenancy Configuration
ENABLE_MULTI_TENANCY=true
DEFAULT_TENANT_ID=system
TENANT_ISOLATION_LEVEL=row
TENANT_RLS_ENABLED=true
TENANT_CROSS_ACCESS_PREVENTION=true
TENANT_AUDIT_LOGGING=true
TENANT_TOKEN_ISOLATION=true
TENANT_DATA_ENCRYPTION=true
TENANT_REQUIRE_VERIFICATION=true

# Tenant Defaults
TENANT_DEFAULT_PLAN=free
TENANT_MAX_USERS_DEFAULT=5
TENANT_FEATURES_DEFAULT={"api_access":true,"file_storage":true,"email_notifications":true}

# Health Check Configuration
HEALTH_CHECK_ENDPOINT=/api/v1/health/liveness
HEALTH_CHECK_TIMEOUT=5000

# Performance Configuration
NODE_OPTIONS=--max-old-space-size=512

# Digital Ocean Specific Configuration
DO_APP_NAME=nodeangularfullstack
DO_REGION=nyc3

# SSL/HTTPS Configuration (Handled by Digital Ocean)
FORCE_HTTPS=true
TRUST_PROXY=true

# File Upload Limits
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf,text/plain

# Session Configuration
SESSION_SECRET=${SESSION_SECRET}
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTP_ONLY=true
SESSION_COOKIE_SAME_SITE=strict

# Backup Configuration
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_BUCKET=nodeangularfullstack-backups
# Story 32.2.2: Tool Detail Pages

**Epic:** 32.2 - Dynamic Routing & Export UI **Story Points:** 6 **Priority:** P1 **Assignee:**
Frontend Developer **Status:** Draft

---

## Description

Enhance the tool detail page with comprehensive tool information display, including metadata,
configuration, permissions, and manifest JSON. Provides tabbed interface for organizing information
and action buttons for tool management (export, edit, delete). Uses PrimeNG components for rich UI.

**Context:**

- Story 32.2.1 created basic tool detail component stub
- This story enhances the component with full functionality
- Displays all tool metadata from Tool Registry
- Prepares for export functionality (buttons disabled until Epic 33)
- Uses PrimeNG TabView for organizing sections

---

## Acceptance Criteria

**AC1: Tool Overview Section**

- ✅ Displays tool icon, name, and description
- ✅ Shows version badge and status badge
- ✅ Shows creation date and last updated date
- ✅ Shows tool ID (read-only, copyable)
- ✅ Shows route and API base paths
- ✅ Uses PrimeNG Card for layout

**AC2: Permissions Display**

- ✅ Lists all tool permissions as chips/badges
- ✅ Permissions color-coded (read: blue, write: orange, admin: red)
- ✅ Empty state for tools with no permissions
- ✅ Grouped by permission type (optional)
- ✅ Searchable/filterable (optional)

**AC3: Manifest JSON Viewer**

- ✅ Displays tool manifest JSON in formatted view
- ✅ Syntax highlighting for JSON
- ✅ Expandable/collapsible JSON tree
- ✅ Copy to clipboard button
- ✅ Pretty-printed with indentation
- ✅ Uses Monaco Editor or PrimeNG CodeHighlighter

**AC4: Tool Configuration Tab**

- ✅ Tab shows tool-specific configuration
- ✅ Displays features enabled/disabled
- ✅ Shows route configuration
- ✅ Shows API endpoint list
- ✅ Editable fields (disabled for now - future story)

**AC5: Analytics Tab (Optional)**

- ✅ Shows tool usage statistics
- ✅ Displays form submission count (if form builder)
- ✅ Shows creation date timeline
- ✅ Displays status history
- ✅ Charts using PrimeNG Chart or placeholder

**AC6: Action Buttons**

- ✅ "Export Tool" button (primary, top-right)
- ✅ "Edit Tool" button (secondary)
- ✅ "Delete Tool" button (danger, confirmation required)
- ✅ "Back to Tools" link/button
- ✅ All buttons show tooltips with descriptions

**AC7: Loading & Error States**

- ✅ Loading skeleton for tool detail page
- ✅ Error message if tool fetch fails
- ✅ Retry button on error
- ✅ 404 state for non-existent tool
- ✅ Graceful degradation for missing data

**AC8: Responsive Design**

- ✅ Desktop: Tabs horizontal, actions top-right
- ✅ Tablet: Tabs horizontal, actions stacked
- ✅ Mobile: Tabs vertical or accordion, full-width
- ✅ Readable on all screen sizes
- ✅ Touch-friendly buttons (48px min)

**AC9: Component Tests**

- ✅ Unit tests with ≥90% coverage
- ✅ Test: renders tool overview correctly
- ✅ Test: displays permissions as chips
- ✅ Test: shows manifest JSON
- ✅ Test: tab switching works
- ✅ Test: back button navigates to tools list
- ✅ Test: action buttons disabled state

---

## Tasks

### Task 1: Enhanced Component Structure

**Subtasks:**

1. Enhance ToolDetailComponent from Story 32.2.1
2. Import PrimeNG TabViewModule, ChipModule, CodeHighlighterModule
3. Add tab state signal: `activeTab = signal<number>(0)`
4. Create sections: Overview, Configuration, Manifest, Analytics
5. Define section interfaces for type safety
6. Add action button handlers (stubs)
7. Add copy-to-clipboard functionality
8. Import clipboard service or use native API
9. Add JSDoc for new methods
10. Update component template structure

### Task 2: Overview Tab Implementation

**Subtasks:**

1. Create overview section in template
2. Display tool icon with colored background
3. Show tool name as h2 heading
4. Show description in paragraph
5. Display version badge (e.g., "v1.0.0")
6. Display status badge with color (registered: green, draft: yellow)
7. Show creation date: "Created: Jan 15, 2025"
8. Show updated date: "Last updated: 2 days ago"
9. Show tool ID with copy button
10. Style overview section with Card

### Task 3: Tool ID with Copy Button

**Subtasks:**

1. Create tool ID display field
2. Add copy icon button (pi-copy)
3. Implement copy-to-clipboard on click
4. Show success message after copy
5. Use PrimeNG Toast for feedback
6. Handle copy errors gracefully
7. Style copy button (subtle, right-aligned)
8. Test copy functionality
9. Add ARIA label for accessibility
10. Support keyboard activation (Enter/Space)

### Task 4: Permissions Section

**Subtasks:**

1. Create permissions list section
2. Use `*ngFor` to iterate permissions
3. Display each permission as PrimeNG Chip
4. Color-code chips by permission type:
   - read: blue (`severity="info"`)
   - write: orange (`severity="warning"`)
   - admin: red (`severity="danger"`)
5. Add icon to each chip (optional)
6. Handle empty permissions array
7. Show "No permissions configured" message if empty
8. Add section heading "Permissions"
9. Style permissions grid (wrap on multiple lines)
10. Test permissions display

### Task 5: Manifest JSON Viewer

**Subtasks:**

1. Create manifest tab content
2. Parse `tool.manifestJson` from API
3. Pretty-print JSON with JSON.stringify(..., null, 2)
4. Use PrimeNG CodeHighlighter for syntax highlighting
5. Set language to "json"
6. Add copy button for entire manifest
7. Add expand/collapse for large JSON (optional)
8. Handle null/undefined manifest
9. Show error if manifest parse fails
10. Test JSON viewer display

### Task 6: Configuration Tab

**Subtasks:**

1. Create configuration tab content
2. Display route path: `/tools/form-builder`
3. Display API base: `/api/form-builder`
4. Show features list (if applicable)
5. Show enabled/disabled toggles (read-only for now)
6. Display custom configuration (if any)
7. Use FieldSet or Panel for grouping
8. Add "Edit Configuration" button (disabled)
9. Style configuration section
10. Test configuration display

### Task 7: Analytics Tab (Optional)

**Subtasks:**

1. Create analytics tab content
2. Display tool usage metrics (placeholder for now)
3. Show creation date timeline
4. Show status history (if tracked)
5. Display submission count (if form tool)
6. Use PrimeNG Chart for visualizations
7. Add chart config (bar, line, or pie)
8. Show "No analytics available" for non-form tools
9. Style analytics section
10. Test analytics tab

### Task 8: Action Buttons Implementation

**Subtasks:**

1. Create action buttons section (top-right)
2. Add "Export Tool" button (primary)
3. Add "Edit Tool" button (secondary)
4. Add "Delete Tool" button (danger)
5. Add tooltip to each button explaining action
6. Disable Export button (Epic 33 not yet implemented)
7. Disable Edit button (future story)
8. Implement Delete confirmation dialog
9. Style button group (horizontal, gap 12px)
10. Add responsive layout (stack on mobile)

### Task 9: Delete Confirmation Dialog

**Subtasks:**

1. Import PrimeNG ConfirmDialog module
2. Add ConfirmationService to component
3. Create `deleteTool()` method
4. Show confirmation dialog on delete click
5. Dialog message: "Are you sure you want to delete [Tool Name]?"
6. Dialog buttons: "Delete" (danger), "Cancel"
7. Call API to delete tool on confirm (stub for now)
8. Show success message after delete
9. Navigate back to tools list
10. Test delete confirmation flow

### Task 10: Tabbed Layout Implementation

**Subtasks:**

1. Add PrimeNG TabView component
2. Define tabs: Overview, Configuration, Manifest, Analytics
3. Bind `[(activeIndex)]` to activeTab signal
4. Lazy load tab content (render only active tab)
5. Add tab icons (optional)
6. Style tabs (match PrimeNG theme)
7. Test tab switching
8. Verify only active tab content rendered
9. Add keyboard navigation (arrow keys)
10. Test tab accessibility

### Task 11: Loading State Enhancement

**Subtasks:**

1. Create loading skeleton for detail page
2. Show skeleton for icon, name, description
3. Show skeleton for tabs
4. Show skeleton for action buttons
5. Match skeleton layout to actual content
6. Add fade-in animation
7. Test loading state appearance
8. Verify smooth transition to loaded state
9. Handle slow network (loading timeout)
10. Add loading indicator for tab switches (optional)

### Task 12: Error State Enhancement

**Subtasks:**

1. Create comprehensive error state
2. Show error icon (pi-exclamation-triangle)
3. Display error message from API
4. Add "Retry" button to refetch tool
5. Add "Back to Tools" button
6. Style error state (centered, muted)
7. Test error state display
8. Test retry functionality
9. Verify navigation on back button
10. Handle multiple error types (404, 500, network)

### Task 13: Responsive Design

**Subtasks:**

1. Test detail page on desktop (≥1200px)
2. Verify tabs horizontal, actions top-right
3. Test on tablet (768px-1199px)
4. Verify tabs horizontal, actions may stack
5. Test on mobile (<768px)
6. Verify tabs vertical or accordion
7. Verify actions full-width, stacked
8. Adjust font sizes for mobile
9. Test touch interactions (buttons 48px min)
10. Verify all content accessible on all sizes

### Task 14: Copy-to-Clipboard Service

**Subtasks:**

1. Create `ClipboardService` (or use existing)
2. Implement `copy(text: string): void` method
3. Use native Clipboard API: `navigator.clipboard.writeText()`
4. Handle permissions if needed
5. Return Promise for success/failure
6. Integrate with ToastService for feedback
7. Show success message: "Copied to clipboard"
8. Show error message if copy fails
9. Test copy on different browsers
10. Add fallback for old browsers (document.execCommand)

### Task 15: Unit Tests - Rendering

**Subtasks:**

1. Write test: "should render tool overview"
2. Verify name, description, version, status displayed
3. Write test: "should display permissions as chips"
4. Verify chip count matches permissions array
5. Write test: "should show manifest JSON"
6. Verify JSON rendered in code block
7. Write test: "should show configuration tab"
8. Verify route and API base displayed
9. Write test: "should render action buttons"
10. Verify Export, Edit, Delete buttons present

### Task 16: Unit Tests - Interactions

**Subtasks:**

1. Write test: "should copy tool ID to clipboard"
2. Mock clipboard API
3. Verify copy called with correct text
4. Write test: "should switch tabs correctly"
5. Trigger tab change, verify activeTab signal updated
6. Write test: "should show delete confirmation dialog"
7. Trigger delete button, verify dialog appears
8. Write test: "should navigate back on back button"
9. Verify router.navigate called with ['/tools']
10. Run coverage report (target ≥90%)

---

## Dev Notes

### Enhanced ToolDetailComponent

**TypeScript (tool-detail.component.ts - Enhanced):**

```typescript
import { Component, OnInit, signal } from '@angular/core';
import { CommonModule } from '@angular/common';
import { ActivatedRoute, Router } from '@angular/router';
import { ButtonModule } from 'primeng/button';
import { CardModule } from 'primeng/card';
import { TabViewModule } from 'primeng/tabview';
import { ChipModule } from 'primeng/chip';
import { TooltipModule } from 'primeng/tooltip';
import { ToastModule } from 'primeng/toast';
import { ConfirmDialogModule } from 'primeng/confirmdialog';
import { BadgeModule } from 'primeng/badge';
import { FieldsetModule } from 'primeng/fieldset';
import { MessageService, ConfirmationService } from 'primeng/api';
import { ToolRegistryService } from '@app/core/services/tool-registry.service';
import { ToolRegistryRecord } from '@nodeangularfullstack/shared';

/**
 * Displays comprehensive details about a single tool.
 *
 * Features:
 * - Tool overview with metadata
 * - Permissions display
 * - Manifest JSON viewer
 * - Configuration details
 * - Analytics (optional)
 * - Action buttons (Export, Edit, Delete)
 *
 * @example
 * Route: /tools/:toolId
 */
@Component({
  selector: 'app-tool-detail',
  standalone: true,
  imports: [
    CommonModule,
    ButtonModule,
    CardModule,
    TabViewModule,
    ChipModule,
    TooltipModule,
    ToastModule,
    ConfirmDialogModule,
    BadgeModule,
    FieldsetModule,
  ],
  providers: [MessageService, ConfirmationService],
  templateUrl: './tool-detail.component.html',
  styleUrl: './tool-detail.component.scss',
})
export class ToolDetailComponent implements OnInit {
  tool = signal<ToolRegistryRecord | null>(null);
  loading = signal<boolean>(true);
  error = signal<string | null>(null);
  activeTab = signal<number>(0);

  prettyManifest = signal<string>('');

  constructor(
    private route: ActivatedRoute,
    private router: Router,
    private toolRegistryService: ToolRegistryService,
    private messageService: MessageService,
    private confirmationService: ConfirmationService
  ) {}

  ngOnInit(): void {
    this.loadTool();
  }

  private loadTool(): void {
    const toolId = this.route.snapshot.paramMap.get('toolId');

    if (!toolId) {
      this.error.set('Invalid tool ID');
      this.loading.set(false);
      return;
    }

    this.loading.set(true);

    this.toolRegistryService.getToolById(toolId).subscribe({
      next: (tool) => {
        this.tool.set(tool);
        this.loading.set(false);
        this.formatManifest(tool.manifestJson);
      },
      error: (err) => {
        this.error.set(err.message || 'Failed to load tool');
        this.loading.set(false);
      },
    });
  }

  private formatManifest(manifestJson: any): void {
    try {
      const formatted = JSON.stringify(manifestJson, null, 2);
      this.prettyManifest.set(formatted);
    } catch (error) {
      console.error('Failed to format manifest:', error);
      this.prettyManifest.set('{}');
    }
  }

  goBack(): void {
    this.router.navigate(['/tools']);
  }

  copyToolId(): void {
    const toolId = this.tool()?.toolId;
    if (!toolId) return;

    navigator.clipboard
      .writeText(toolId)
      .then(() => {
        this.messageService.add({
          severity: 'success',
          summary: 'Copied',
          detail: 'Tool ID copied to clipboard',
          life: 3000,
        });
      })
      .catch((err) => {
        console.error('Copy failed:', err);
        this.messageService.add({
          severity: 'error',
          summary: 'Copy Failed',
          detail: 'Failed to copy to clipboard',
          life: 3000,
        });
      });
  }

  copyManifest(): void {
    navigator.clipboard
      .writeText(this.prettyManifest())
      .then(() => {
        this.messageService.add({
          severity: 'success',
          summary: 'Copied',
          detail: 'Manifest copied to clipboard',
          life: 3000,
        });
      })
      .catch((err) => {
        console.error('Copy manifest failed:', err);
      });
  }

  getPermissionSeverity(permission: string): string {
    if (permission === 'read') return 'info';
    if (permission === 'write') return 'warning';
    if (permission === 'admin') return 'danger';
    return 'secondary';
  }

  getStatusSeverity(status: string): 'success' | 'warning' | 'secondary' | 'info' {
    switch (status) {
      case 'registered':
        return 'success';
      case 'draft':
        return 'warning';
      case 'archived':
        return 'secondary';
      case 'exported':
        return 'info';
      default:
        return 'secondary';
    }
  }

  exportTool(): void {
    this.messageService.add({
      severity: 'info',
      summary: 'Coming Soon',
      detail: 'Export functionality will be available in Epic 33',
      life: 5000,
    });
  }

  editTool(): void {
    this.messageService.add({
      severity: 'info',
      summary: 'Coming Soon',
      detail: 'Edit functionality will be available in a future story',
      life: 5000,
    });
  }

  deleteTool(): void {
    const toolName = this.tool()?.name;

    this.confirmationService.confirm({
      message: `Are you sure you want to delete "${toolName}"? This action cannot be undone.`,
      header: 'Delete Tool',
      icon: 'pi pi-exclamation-triangle',
      acceptLabel: 'Delete',
      rejectLabel: 'Cancel',
      acceptButtonStyleClass: 'p-button-danger',
      accept: () => {
        // TODO: Implement delete API call
        this.messageService.add({
          severity: 'success',
          summary: 'Deleted',
          detail: `${toolName} has been deleted`,
          life: 3000,
        });
        setTimeout(() => this.goBack(), 1500);
      },
    });
  }
}
```

**Template (tool-detail.component.html - Enhanced):**

```html
<div class="tool-detail-container">
  <!-- Toast for notifications -->
  <p-toast></p-toast>

  <!-- Confirm Dialog -->
  <p-confirmDialog></p-confirmDialog>

  <!-- Loading State -->
  <div *ngIf="loading()" class="loading-state">
    <p-card>
      <div class="skeleton-content">
        <div class="skeleton-header">
          <p-skeleton shape="circle" size="64px"></p-skeleton>
          <div>
            <p-skeleton width="200px" height="2rem"></p-skeleton>
            <p-skeleton width="150px" height="1rem"></p-skeleton>
          </div>
        </div>
        <p-skeleton width="100%" height="100px"></p-skeleton>
      </div>
    </p-card>
  </div>

  <!-- Error State -->
  <div *ngIf="error() && !loading()" class="error-state">
    <p-card>
      <i class="pi pi-exclamation-triangle error-icon"></i>
      <h3>Error Loading Tool</h3>
      <p>{{ error() }}</p>
      <div class="error-actions">
        <p-button label="Retry" icon="pi pi-refresh" (onClick)="loadTool()"></p-button>
        <p-button
          label="Back to Tools"
          icon="pi pi-arrow-left"
          severity="secondary"
          (onClick)="goBack()"
        ></p-button>
      </div>
    </p-card>
  </div>

  <!-- Tool Content -->
  <div *ngIf="tool() && !loading()" class="tool-content">
    <!-- Header with Actions -->
    <div class="tool-header">
      <p-button
        icon="pi pi-arrow-left"
        [text]="true"
        (onClick)="goBack()"
        label="Back to Tools"
        class="back-button"
      ></p-button>

      <div class="action-buttons">
        <p-button
          label="Export"
          icon="pi pi-download"
          severity="primary"
          (onClick)="exportTool()"
          pTooltip="Export this tool as an independent service"
        ></p-button>
        <p-button
          label="Edit"
          icon="pi pi-pencil"
          severity="secondary"
          [outlined]="true"
          (onClick)="editTool()"
          pTooltip="Edit tool configuration"
        ></p-button>
        <p-button
          icon="pi pi-trash"
          severity="danger"
          [outlined]="true"
          (onClick)="deleteTool()"
          pTooltip="Delete this tool"
        ></p-button>
      </div>
    </div>

    <!-- Tool Info Card -->
    <p-card class="tool-info-card">
      <!-- Tool Header -->
      <div class="card-header-content">
        <div class="tool-icon-wrapper">
          <i [class]="'pi ' + (tool()!.icon || 'pi-box')" class="tool-icon"></i>
        </div>
        <div class="tool-title">
          <h2>{{ tool()!.name }}</h2>
          <div class="tool-meta">
            <span class="tool-id">
              ID: {{ tool()!.toolId }}
              <i class="pi pi-copy copy-icon" (click)="copyToolId()" pTooltip="Copy tool ID"></i>
            </span>
            <p-badge
              [value]="tool()!.status"
              [severity]="getStatusSeverity(tool()!.status)"
            ></p-badge>
          </div>
        </div>
      </div>

      <!-- Tabs -->
      <p-tabView [(activeIndex)]="activeTab">
        <!-- Overview Tab -->
        <p-tabPanel header="Overview" leftIcon="pi pi-info-circle">
          <div class="overview-section">
            <div class="detail-group">
              <label>Description</label>
              <p>{{ tool()!.description || 'No description provided' }}</p>
            </div>

            <div class="detail-row">
              <div class="detail-group">
                <label>Version</label>
                <p>{{ tool()!.version }}</p>
              </div>
              <div class="detail-group">
                <label>Status</label>
                <p-badge
                  [value]="tool()!.status"
                  [severity]="getStatusSeverity(tool()!.status)"
                ></p-badge>
              </div>
            </div>

            <div class="detail-group">
              <label>Permissions</label>
              <div *ngIf="tool()!.permissions.length > 0" class="permissions-list">
                <p-chip
                  *ngFor="let permission of tool()!.permissions"
                  [label]="permission"
                  [styleClass]="'permission-chip-' + permission"
                ></p-chip>
              </div>
              <p *ngIf="tool()!.permissions.length === 0" class="empty-message">
                No permissions configured
              </p>
            </div>

            <div class="detail-row">
              <div class="detail-group">
                <label>Created</label>
                <p>{{ tool()!.createdAt | date: 'medium' }}</p>
              </div>
              <div class="detail-group">
                <label>Last Updated</label>
                <p>{{ tool()!.updatedAt | date: 'medium' }}</p>
              </div>
            </div>
          </div>
        </p-tabPanel>

        <!-- Configuration Tab -->
        <p-tabPanel header="Configuration" leftIcon="pi pi-cog">
          <div class="config-section">
            <p-fieldset legend="Routing">
              <div class="detail-group">
                <label>Frontend Route</label>
                <code>{{ tool()!.route }}</code>
              </div>
              <div class="detail-group">
                <label>API Base</label>
                <code>{{ tool()!.apiBase }}</code>
              </div>
            </p-fieldset>

            <p-fieldset legend="Features">
              <p class="empty-message">No custom features configured</p>
            </p-fieldset>
          </div>
        </p-tabPanel>

        <!-- Manifest Tab -->
        <p-tabPanel header="Manifest" leftIcon="pi pi-file-code">
          <div class="manifest-section">
            <div class="manifest-header">
              <h4>Tool Manifest JSON</h4>
              <p-button
                icon="pi pi-copy"
                [text]="true"
                (onClick)="copyManifest()"
                pTooltip="Copy manifest to clipboard"
              ></p-button>
            </div>
            <pre class="manifest-code">{{ prettyManifest() }}</pre>
          </div>
        </p-tabPanel>

        <!-- Analytics Tab (Optional) -->
        <p-tabPanel header="Analytics" leftIcon="pi pi-chart-bar">
          <div class="analytics-section">
            <p class="empty-message">
              <i class="pi pi-chart-bar"></i>
              Analytics not yet available
            </p>
          </div>
        </p-tabPanel>
      </p-tabView>
    </p-card>
  </div>
</div>
```

**Styles (tool-detail.component.scss):**

```scss
.tool-detail-container {
  padding: 24px;
  max-width: 1200px;
  margin: 0 auto;

  @media (max-width: 768px) {
    padding: 16px;
  }
}

.tool-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;

  @media (max-width: 768px) {
    flex-direction: column;
    align-items: stretch;
    gap: 12px;
  }
}

.action-buttons {
  display: flex;
  gap: 12px;

  @media (max-width: 768px) {
    flex-direction: column;
    width: 100%;
  }
}

.card-header-content {
  display: flex;
  align-items: center;
  gap: 20px;
  margin-bottom: 24px;

  @media (max-width: 768px) {
    flex-direction: column;
    text-align: center;
  }
}

.tool-icon-wrapper {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  background: var(--primary-color);
  display: flex;
  align-items: center;
  justify-content: center;

  .tool-icon {
    font-size: 2rem;
    color: white;
  }
}

.tool-title {
  flex: 1;

  h2 {
    margin: 0 0 8px 0;
    font-size: 1.75rem;
    color: var(--text-color);
  }

  .tool-meta {
    display: flex;
    align-items: center;
    gap: 16px;
    flex-wrap: wrap;
  }

  .tool-id {
    font-size: 0.875rem;
    color: var(--text-color-secondary);
    display: flex;
    align-items: center;
    gap: 8px;

    .copy-icon {
      cursor: pointer;
      color: var(--primary-color);

      &:hover {
        opacity: 0.7;
      }
    }
  }
}

.overview-section,
.config-section,
.manifest-section,
.analytics-section {
  padding: 16px 0;
}

.detail-group {
  margin-bottom: 20px;

  label {
    display: block;
    font-weight: 600;
    color: var(--text-color-secondary);
    font-size: 0.875rem;
    margin-bottom: 8px;
  }

  p {
    margin: 0;
    color: var(--text-color);
    line-height: 1.5;
  }

  code {
    background: var(--surface-50);
    padding: 4px 8px;
    border-radius: 4px;
    font-family: 'Courier New', monospace;
    font-size: 0.875rem;
  }
}

.detail-row {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 20px;

  @media (max-width: 768px) {
    grid-template-columns: 1fr;
  }
}

.permissions-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.manifest-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;

  h4 {
    margin: 0;
  }
}

.manifest-code {
  background: var(--surface-50);
  border: 1px solid var(--surface-border);
  border-radius: 6px;
  padding: 16px;
  overflow-x: auto;
  font-family: 'Courier New', monospace;
  font-size: 0.875rem;
  line-height: 1.6;
  max-height: 500px;
  overflow-y: auto;
}

.empty-message {
  color: var(--text-color-secondary);
  font-style: italic;
  text-align: center;
  padding: 32px;

  i {
    font-size: 2rem;
    display: block;
    margin-bottom: 12px;
    color: var(--text-color-secondary);
  }
}

.error-state,
.loading-state {
  padding: 40px;
  text-align: center;
}

.skeleton-header {
  display: flex;
  align-items: center;
  gap: 20px;
  margin-bottom: 24px;
}
```

---

## Testing

### Manual Testing

**Test 1: View Tool Detail**

```bash
# 1. Navigate to tool detail page
http://localhost:4200/tools/form-builder

# Expected: Tool overview displayed with all metadata
# Verify: Icon, name, description, version, status, permissions
```

**Test 2: Copy Tool ID**

```bash
# 1. Click copy icon next to tool ID
# Expected: Success toast "Copied to clipboard"
# Verify: Paste clipboard - should contain tool ID
```

**Test 3: Switch Tabs**

```bash
# 1. Click "Configuration" tab
# Expected: Configuration section displays
# 2. Click "Manifest" tab
# Expected: JSON manifest displays
# 3. Click "Analytics" tab
# Expected: "Analytics not yet available" message
```

**Test 4: Copy Manifest**

```bash
# 1. Navigate to Manifest tab
# 2. Click copy button
# Expected: Manifest JSON copied to clipboard
# Verify: Paste clipboard - should contain JSON
```

**Test 5: Delete Tool**

```bash
# 1. Click delete button (trash icon)
# Expected: Confirmation dialog appears
# 2. Click "Cancel"
# Expected: Dialog closes, tool not deleted
# 3. Click delete again, then "Delete"
# Expected: Success message, navigate back to tools list
```

### Automated Testing

```bash
# Run component tests
npm --workspace=apps/web run test -- --include="**/tool-detail.component.spec.ts" --watch=false

# Expected output:
# PASS src/app/features/tools/pages/tool-detail/tool-detail.component.spec.ts
#   ToolDetailComponent
#     ✓ should create (20ms)
#     ✓ should render tool overview (35ms)
#     ✓ should display permissions as chips (30ms)
#     ✓ should show manifest JSON (28ms)
#     ✓ should switch tabs (25ms)
#     ✓ should copy tool ID to clipboard (30ms)
#     ✓ should show delete confirmation (32ms)
#
# Tests: 7 passed, 7 total
# Coverage: Statements 91%, Branches 87%, Functions 89%, Lines 91%
```

---

## Dependencies

**Depends On:**

- Story 32.2.1: Dynamic Route Configuration (route setup)
- Story 32.1.2: Tool Registry Service (getToolById)

**Blocks:**

- Story 32.2.3: Export Button & Permission Checks (needs detail page)

---

## QA Gate

**Quality Score Target:** ≥90/100

| Criterion          | Weight | Target                 |
| ------------------ | ------ | ---------------------- |
| Unit test coverage | 20%    | ≥90%                   |
| All tests passing  | 15%    | 100%                   |
| Overview complete  | 15%    | All metadata shown     |
| Tabs functional    | 15%    | All tabs switchable    |
| Copy works         | 10%    | ID + manifest copyable |
| Responsive design  | 10%    | Works on all sizes     |
| Accessibility      | 10%    | ARIA labels, keyboard  |
| Code quality       | 5%     | No ESLint errors       |

**Exit Criteria:**

- All unit tests pass with ≥90% coverage
- Tool overview shows all metadata
- Tabs switch correctly (Overview, Config, Manifest, Analytics)
- Copy-to-clipboard works for ID and manifest
- Action buttons present (disabled Export/Edit for now)
- Delete confirmation dialog functional
- Responsive design verified (desktop, tablet, mobile)
- Loading and error states work

---

## Notes

- Tool detail page is foundation for tool management
- Export button disabled until Epic 33 implementation
- Edit functionality future story
- Delete requires confirmation to prevent accidents
- Manifest JSON viewer helps debugging
- Analytics tab placeholder for future metrics
- Responsive tabs improve mobile UX
- Copy-to-clipboard uses native Clipboard API

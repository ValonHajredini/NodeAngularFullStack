# Story 20.5: Frontend - Theme Dropdown Component

## Status

Draft

## Story

**As a** frontend developer, **I want** to create a theme dropdown component for the form builder
toolbar, **so that** users can browse and select pre-designed themes to apply to their forms.

## Acceptance Criteria

1. Create `ThemeDropdownComponent` using PrimeNG OverlayPanel for dropdown UI
2. Create `ThemeCardComponent` to display individual theme thumbnails with metadata
3. Implement responsive grid layout (4 columns on desktop â‰¥1280px, 3 on tablet 768-1279px, 2 on
   mobile <768px)
4. Implement lazy-loading of theme thumbnail images with PrimeNG Skeleton placeholders
5. Highlight currently applied theme with blue border visual indicator
6. Emit `themeSelected` event when user clicks a theme card
7. Fetch themes from `GET /api/themes` endpoint when dropdown opens
8. Add keyboard navigation (arrow keys to navigate grid, Enter to select, Escape to close)
9. Write unit tests with 80%+ coverage for both components

**Integration Verification:**

- IV1: Verify dropdown doesn't interfere with drag-and-drop functionality in form builder canvas
- IV2: Verify dropdown closes correctly on outside click (PrimeNG default behavior)
- IV3: Verify toolbar layout remains correct with new "Styling Themes" button added

## Tasks / Subtasks

- [ ] Task 1: Create ThemesApiService for HTTP requests (AC: 7)
  - [ ] Create file `apps/web/src/app/features/tools/components/form-builder/themes-api.service.ts`
  - [ ] Inject `ApiClient` from core services [Source: frontend-architecture.md#service-example]
  - [ ] Implement `getThemes()` method:
    ```typescript
    getThemes(): Observable<ApiResponse<FormTheme[]>> {
      return this.api.get<ApiResponse<FormTheme[]>>('/themes');
    }
    ```
  - [ ] Implement `applyTheme(themeId: string)` method:
    ```typescript
    applyTheme(themeId: string): Observable<ApiResponse<{ usageCount: number }>> {
      return this.api.post<ApiResponse<{ usageCount: number }>>(`/themes/${themeId}/apply`, {});
    }
    ```
  - [ ] Import FormTheme from `@nodeangularfullstack/shared`
  - [ ] Add JSDoc comments to all methods [Source: coding-standards.md#documentation-standards]
  - [ ] Mark service as `providedIn: 'root'` for singleton pattern

- [ ] Task 2: Create ThemeCardComponent (AC: 2, 4, 5)
  - [ ] Create file
        `apps/web/src/app/features/tools/components/form-builder/theme-dropdown/theme-card/theme-card.component.ts`
  - [ ] Use standalone component pattern [Source: frontend-architecture.md#component-template]
  - [ ] Add `@Input() theme: FormTheme` property
  - [ ] Add `@Input() isActive: boolean` property for highlight state
  - [ ] Add `@Output() selected = new EventEmitter<FormTheme>()` for click event
  - [ ] Template structure:
    ```html
    <div
      class="theme-card"
      [class.active]="isActive"
      (click)="selected.emit(theme)"
      role="button"
      tabindex="0"
      [attr.aria-label]="'Select ' + theme.name + ' theme'"
    >
      <div class="theme-thumbnail">
        <img
          *ngIf="imageLoaded; else skeleton"
          [src]="theme.thumbnailUrl"
          [alt]="theme.name"
          (load)="imageLoaded = true"
          loading="lazy"
        />
        <ng-template #skeleton>
          <p-skeleton width="100%" height="160px" />
        </ng-template>
      </div>
      <div class="theme-info">
        <h4 class="theme-name">{{ theme.name }}</h4>
        <span class="theme-usage"> <i class="pi pi-star"></i> {{ theme.usageCount }} </span>
      </div>
    </div>
    ```
  - [ ] Styles using Tailwind CSS:
    ```typescript
    styles: [
      `
      .theme-card {
        @apply cursor-pointer rounded-lg border-2 border-gray-300 p-3 transition-all;
        @apply hover:scale-102 hover:shadow-lg;
      }
      .theme-card.active {
        @apply border-blue-500 shadow-md;
      }
      .theme-thumbnail {
        @apply rounded-md overflow-hidden mb-2;
        height: 160px;
      }
      .theme-thumbnail img {
        @apply w-full h-full object-cover;
      }
      .theme-name {
        @apply text-sm font-semibold mb-1;
      }
      .theme-usage {
        @apply text-xs text-gray-600 flex items-center gap-1;
      }
    `,
    ];
    ```
  - [ ] Implement lazy image loading with `loading="lazy"` attribute
  - [ ] Show PrimeNG Skeleton while image loads

- [ ] Task 3: Create ThemeDropdownComponent (AC: 1, 3, 6, 7, 8)
  - [ ] Create file
        `apps/web/src/app/features/tools/components/form-builder/theme-dropdown/theme-dropdown.component.ts`
  - [ ] Use standalone component pattern
  - [ ] Import PrimeNG OverlayPanel, Skeleton, and ThemeCardComponent
  - [ ] Inject ThemesApiService
  - [ ] Add `@Input() currentThemeId: string | undefined` for active theme
  - [ ] Add `@Output() themeSelected = new EventEmitter<FormTheme>()` event
  - [ ] Create signal for themes: `themes = signal<FormTheme[]>([])`
  - [ ] Create signal for loading: `loading = signal<boolean>(false)`
  - [ ] Template structure:

    ```html
    <button
      pButton
      type="button"
      label="Styling Themes"
      icon="pi pi-palette"
      severity="secondary"
      size="small"
      (click)="toggleDropdown($event)"
    ></button>

    <p-overlayPanel
      #themePanel
      [dismissable]="true"
      [showCloseIcon]="true"
      styleClass="theme-dropdown-panel"
    >
      <ng-template pTemplate="content">
        <div class="theme-dropdown-header">
          <h3>Styling Themes</h3>
          <span class="theme-count">{{ themes().length }} themes</span>
        </div>

        <div *ngIf="loading(); else themeGrid" class="loading-skeleton">
          <p-skeleton
            *ngFor="let i of [1,2,3,4,5,6,7,8]"
            width="240px"
            height="200px"
            class="skeleton-card"
          />
        </div>

        <ng-template #themeGrid>
          <div class="theme-grid" role="grid" (keydown)="handleKeyboardNav($event)">
            <app-theme-card
              *ngFor="let theme of themes()"
              [theme]="theme"
              [isActive]="theme.id === currentThemeId"
              (selected)="onThemeSelect($event)"
            />
          </div>
        </ng-template>
      </ng-template>
    </p-overlayPanel>
    ```

  - [ ] Implement `toggleDropdown(event: Event)` method:
    ```typescript
    toggleDropdown(event: Event) {
      if (this.themes().length === 0) {
        this.fetchThemes();
      }
      this.themePanel.toggle(event);
    }
    ```
  - [ ] Implement `fetchThemes()` method:
    ```typescript
    private fetchThemes() {
      this.loading.set(true);
      this.themesApi.getThemes().subscribe({
        next: (response) => {
          this.themes.set(response.data);
          this.loading.set(false);
        },
        error: (err) => {
          console.error('Failed to load themes:', err);
          this.loading.set(false);
        }
      });
    }
    ```
  - [ ] Implement `onThemeSelect(theme: FormTheme)`:
    ```typescript
    onThemeSelect(theme: FormTheme) {
      this.themeSelected.emit(theme);
      this.themePanel.hide();
    }
    ```
  - [ ] Implement keyboard navigation (AC: 8):

    ```typescript
    handleKeyboardNav(event: KeyboardEvent) {
      const cards = event.currentTarget.querySelectorAll('.theme-card');
      const currentIndex = Array.from(cards).findIndex(card => card === document.activeElement);

      switch(event.key) {
        case 'ArrowRight':
          event.preventDefault();
          // Move focus to next card
          break;
        case 'ArrowLeft':
          event.preventDefault();
          // Move focus to previous card
          break;
        case 'Enter':
          event.preventDefault();
          // Select focused theme
          break;
        case 'Escape':
          event.preventDefault();
          this.themePanel.hide();
          break;
      }
    }
    ```

  - [ ] Responsive grid styles:

    ```typescript
    styles: [
      `
      .theme-grid {
        display: grid;
        gap: 1rem;
        max-height: 500px;
        overflow-y: auto;
      }
    
      /* Desktop: 4 columns */
      @media (min-width: 1280px) {
        .theme-grid { grid-template-columns: repeat(4, 1fr); }
        .theme-dropdown-panel { width: 1000px; }
      }
    
      /* Tablet: 3 columns */
      @media (min-width: 768px) and (max-width: 1279px) {
        .theme-grid { grid-template-columns: repeat(3, 1fr); }
        .theme-dropdown-panel { width: 720px; }
      }
    
      /* Mobile: 2 columns */
      @media (max-width: 767px) {
        .theme-grid { grid-template-columns: repeat(2, 1fr); }
        .theme-dropdown-panel { width: 480px; max-width: 90vw; }
      }
    `,
    ];
    ```

- [ ] Task 4: Integrate ThemeDropdownComponent into FormBuilderComponent (AC: All, IV3)
  - [ ] Open file
        `apps/web/src/app/features/tools/components/form-builder/form-builder.component.ts`
  - [ ] Import ThemeDropdownComponent
  - [ ] Add to toolbar template (replace "My Forms" button):

    ```html
    <div class="toolbar-actions">
      <app-theme-dropdown
        [currentThemeId]="formBuilderService.currentForm()?.settings.themeId"
        (themeSelected)="onThemeSelected($event)"
      />

      <button pButton label="Settings" icon="pi pi-cog" ... />
      <button pButton label="Preview" icon="pi pi-eye" ... />
      <button pButton label="Publish" icon="pi pi-upload" ... />
    </div>
    ```

  - [ ] Implement `onThemeSelected(theme: FormTheme)` handler:
    ```typescript
    onThemeSelected(theme: FormTheme) {
      this.formBuilderService.applyTheme(theme.id);
      this.messageService.add({
        severity: 'success',
        summary: 'Theme Applied',
        detail: `"${theme.name}" theme applied to form`,
        life: 2000
      });
    }
    ```
  - [ ] Move "My Forms" functionality to breadcrumb navigation (click breadcrumb opens dialog)
  - [ ] Verify toolbar layout with new button (IV3)

- [ ] Task 5: Extend FormBuilderService with theme management (AC: 6)
  - [ ] Open file `apps/web/src/app/features/tools/components/form-builder/form-builder.service.ts`
  - [ ] Inject ThemesApiService
  - [ ] Add signals for theme state:
    ```typescript
    readonly currentTheme = signal<FormTheme | null>(null);
    readonly availableThemes = signal<FormTheme[]>([]);
    ```
  - [ ] Implement `applyTheme(themeId: string)` method:

    ```typescript
    applyTheme(themeId: string): void {
      const theme = this.availableThemes().find(t => t.id === themeId);
      if (!theme) return;

      // Update current form settings
      const currentForm = this.currentForm();
      if (currentForm) {
        currentForm.settings.themeId = themeId;
        this.currentTheme.set(theme);
        this.markDirty();
      }

      // Track theme application via API
      this.themesApi.applyTheme(themeId).subscribe();
    }
    ```

  - [ ] Implement `loadTheme(themeId: string)` method to fetch theme when editing existing form
  - [ ] Update `saveForm()` method to include themeId in PATCH request

- [ ] Task 6: Write unit tests for ThemeCardComponent (AC: 9)
  - [ ] Create file
        `apps/web/src/app/features/tools/components/form-builder/theme-dropdown/theme-card/theme-card.component.spec.ts`
  - [ ] Test component renders theme name and usage count
  - [ ] Test active class applied when isActive is true
  - [ ] Test selected event emitted on click
  - [ ] Test lazy image loading shows skeleton initially
  - [ ] Test image load event sets imageLoaded flag
  - [ ] Run
        `npm --workspace=apps/web run test -- --include="**/theme-card.component.spec.ts" --watch=false`

- [ ] Task 7: Write unit tests for ThemeDropdownComponent (AC: 9)
  - [ ] Create file
        `apps/web/src/app/features/tools/components/form-builder/theme-dropdown/theme-dropdown.component.spec.ts`
  - [ ] Mock ThemesApiService using Jasmine spies
  - [ ] Test dropdown toggle opens OverlayPanel
  - [ ] Test fetchThemes called when dropdown opens first time
  - [ ] Test themes populated from API response
  - [ ] Test loading skeleton shown while fetching
  - [ ] Test themeSelected event emitted when theme clicked
  - [ ] Test dropdown closes after theme selection
  - [ ] Test keyboard navigation (arrow keys, Enter, Escape)
  - [ ] Test responsive grid layout with different viewport widths
  - [ ] Run
        `npm --workspace=apps/web run test -- --include="**/theme-dropdown.component.spec.ts" --watch=false`
  - [ ] Verify combined coverage â‰¥80%

- [ ] Task 8: Integration verification tests (IV1, IV2, IV3)
  - [ ] Test IV1: Open theme dropdown while dragging field in form canvas, verify drag-drop still
        works
  - [ ] Test IV1: Select theme from dropdown, verify drag-drop functionality not affected
  - [ ] Test IV2: Open dropdown, click outside panel, verify dropdown closes (PrimeNG default)
  - [ ] Test IV3: Measure toolbar height before/after adding button, verify layout correct
  - [ ] Test IV3: Test on mobile viewport (< 768px), verify toolbar wraps properly
  - [ ] Manual testing: Open form builder, click "Styling Themes", verify grid layout responsive

- [ ] Task 9: Add lint and typecheck verification
  - [ ] Run
        `npm --workspace=apps/web run lint -- src/app/features/tools/components/form-builder/theme-dropdown/`
        to verify no linting errors
  - [ ] Run `npm --workspace=apps/web run typecheck` to verify all TypeScript compiles
  - [ ] Fix any type errors or linting issues

## Dev Notes

### Previous Story Insights

**Story 20.1-20.4 Completion Notes:**

- Backend theme API complete with GET /api/themes endpoint
- FormTheme interface defined in shared types
- Forms API returns embedded theme object when themeId is set
- Theme usage tracking via POST /api/themes/:id/apply

**Key Learnings:**

- Themes are pre-designed styling configurations stored in database
- Frontend fetches theme list from GET /api/themes (sorted by usage count DESC)
- Theme thumbnails are static images stored in DigitalOcean Spaces
- FormBuilderService manages current form state including applied theme

**Integration Points:**

- ThemesApiService calls GET /api/themes to fetch available themes
- FormBuilderService.applyTheme() updates form settings.themeId
- Save operation (PATCH /api/forms/:id) persists themeId to backend
- Theme application tracked via POST /api/themes/:id/apply

### Data Models

**FormTheme Interface** (from shared types):

```typescript
export interface FormTheme {
  id: string;
  name: string;
  description?: string;
  thumbnailUrl: string; // DigitalOcean Spaces URL
  themeConfig: ResponsiveThemeConfig;
  usageCount: number; // For sorting (DESC)
  isActive: boolean;
  createdBy?: string;
  createdAt: Date;
  updatedAt: Date;
}
```

[Source: packages/shared/src/types/forms.types.ts]

**API Response Format:**

```typescript
interface ThemesListResponse {
  success: true;
  data: FormTheme[]; // Sorted by usageCount DESC
}
```

**Component @Input/@Output:**

```typescript
// ThemeCardComponent
@Input() theme: FormTheme;
@Input() isActive: boolean;
@Output() selected = new EventEmitter<FormTheme>();

// ThemeDropdownComponent
@Input() currentThemeId: string | undefined;
@Output() themeSelected = new EventEmitter<FormTheme>();
```

### API Specifications

**GET /api/themes:**

- Endpoint: `/api/themes`
- Method: GET
- Authentication: Required (JWT)
- Response: `{ success: true, data: FormTheme[] }`
- Sorting: Usage count descending (most popular first)
- Filtering: Only active themes (is_active = true)

**POST /api/themes/:id/apply:**

- Endpoint: `/api/themes/:id/apply`
- Method: POST
- Authentication: Required (JWT)
- Purpose: Track theme application, increment usage_count
- Response: `{ success: true, usageCount: number }`

[Source: docs/prd/epic-20-form-styling-theme-system.md#api-integration]

### Component Specifications

**ThemeCardComponent:**

- Location: `apps/web/src/app/features/tools/components/form-builder/theme-dropdown/theme-card/`
- Type: Standalone presentational component
- Responsibilities:
  - Display theme thumbnail image with lazy loading
  - Show theme name and usage count
  - Highlight active theme with border
  - Emit click event for theme selection
- Dependencies: PrimeNG Skeleton for loading state
- Styling: Tailwind CSS utility classes

**ThemeDropdownComponent:**

- Location: `apps/web/src/app/features/tools/components/form-builder/theme-dropdown/`
- Type: Standalone container component
- Responsibilities:
  - Display PrimeNG OverlayPanel with theme grid
  - Fetch themes from API on first open
  - Handle theme selection and emit event
  - Keyboard navigation support
  - Responsive grid layout
- Dependencies: PrimeNG OverlayPanel, ThemesApiService, ThemeCardComponent
- State: Signals for themes list and loading state

**FormBuilderComponent Integration:**

- Add ThemeDropdownComponent to toolbar
- Pass currentThemeId from FormBuilderService
- Handle themeSelected event â†’ call service.applyTheme()
- Show toast notification on theme application
- Move "My Forms" to breadcrumb navigation

[Source: docs/prd/epic-20-form-styling-theme-system.md#new-components]

### File Locations

**Service:**

- `apps/web/src/app/features/tools/components/form-builder/themes-api.service.ts`

**Components:**

- `apps/web/src/app/features/tools/components/form-builder/theme-dropdown/theme-dropdown.component.ts`
- `apps/web/src/app/features/tools/components/form-builder/theme-dropdown/theme-card/theme-card.component.ts`

**Modified Files:**

- `apps/web/src/app/features/tools/components/form-builder/form-builder.component.ts` (toolbar
  integration)
- `apps/web/src/app/features/tools/components/form-builder/form-builder.service.ts` (theme state
  management)

**Test Files:**

- `apps/web/src/app/features/tools/components/form-builder/themes-api.service.spec.ts`
- `apps/web/src/app/features/tools/components/form-builder/theme-dropdown/theme-dropdown.component.spec.ts`
- `apps/web/src/app/features/tools/components/form-builder/theme-dropdown/theme-card/theme-card.component.spec.ts`

[Source: frontend-architecture.md#component-organization]

### Testing Requirements

**Testing Framework:**

- Jest 29+ with Angular Testing Library [Source: tech-stack.md]
- Karma + Jasmine for component testing
- TestBed for component instantiation
- Jasmine spies for service mocking

**Unit Test Standards:**

```typescript
// theme-card.component.spec.ts
import { ComponentFixture, TestBed } from '@angular/core/testing';
import { ThemeCardComponent } from './theme-card.component';

describe('ThemeCardComponent', () => {
  let component: ThemeCardComponent;
  let fixture: ComponentFixture<ThemeCardComponent>;

  beforeEach(() => {
    TestBed.configureTestingModule({
      imports: [ThemeCardComponent], // Standalone component
    });
    fixture = TestBed.createComponent(ThemeCardComponent);
    component = fixture.componentInstance;
  });

  it('should display theme name', () => {
    component.theme = {
      id: '1',
      name: 'Neon',
      thumbnailUrl: 'https://...',
      // ... other properties
    };
    fixture.detectChanges();

    const nameEl = fixture.nativeElement.querySelector('.theme-name');
    expect(nameEl.textContent).toContain('Neon');
  });

  it('should emit selected event on click', () => {
    spyOn(component.selected, 'emit');
    component.theme = {
      /* mock theme */
    };

    const card = fixture.nativeElement.querySelector('.theme-card');
    card.click();

    expect(component.selected.emit).toHaveBeenCalledWith(component.theme);
  });

  it('should apply active class when isActive is true', () => {
    component.isActive = true;
    fixture.detectChanges();

    const card = fixture.nativeElement.querySelector('.theme-card');
    expect(card.classList.contains('active')).toBe(true);
  });
});
```

[Source: testing-strategy.md#frontend-component-test]

**Component Test Requirements:**

- Test rendering with mock data
- Test user interactions (click, keyboard)
- Test conditional rendering (loading state, active state)
- Test event emissions
- Test responsive layout (use window.innerWidth mocks)
- Coverage requirement: 80%+ for both components

**Service Test Requirements:**

- Mock HttpClient using Jasmine spies
- Test getThemes() returns Observable<FormTheme[]>
- Test applyTheme() posts to correct endpoint
- Test error handling

### Technical Constraints

**Angular Constraints:**

- Angular 20+ standalone components (no NgModules) [Source: tech-stack.md]
- TypeScript 5.3+ strict mode
- ChangeDetectionStrategy.OnPush for performance
- Signals for reactive state management

**PrimeNG Constraints:**

- PrimeNG 17+ components [Source: tech-stack.md]
- OverlayPanel for dropdown UI
- Skeleton for loading placeholders
- Follow PrimeNG theming and styling conventions

**Responsive Design:**

- Desktop (â‰¥1280px): 4-column grid, 1000px panel width
- Tablet (768-1279px): 3-column grid, 720px panel width
- Mobile (<768px): 2-column grid, 480px panel width (max 90vw)
- Use CSS media queries, not JavaScript viewport detection

**Performance:**

- Lazy load thumbnail images (`loading="lazy"` attribute)
- Show skeleton placeholders during image load
- Fetch themes only on first dropdown open (cache in component)
- Debounce keyboard navigation events (prevent rapid key spamming)

**Accessibility:**

- Keyboard navigation with arrow keys, Enter, Escape
- ARIA labels on theme cards: `aria-label="Select [name] theme"`
- Role="button" on clickable cards
- Focus management (trap focus in dropdown when open)

**State Management:**

- Use Angular signals for reactive state [Source:
  frontend-architecture.md#state-management-patterns]
- FormBuilderService owns form state including themeId
- ThemeDropdownComponent owns theme list state
- Communication via EventEmitter (Output events)

### Project Structure Notes

**Component Hierarchy:**

```
FormBuilderComponent (container)
â”œâ”€â”€ Toolbar
â”‚   â”œâ”€â”€ ThemeDropdownComponent (NEW)
â”‚   â”‚   â”œâ”€â”€ PrimeNG OverlayPanel
â”‚   â”‚   â””â”€â”€ ThemeCardComponent (repeated)
â”‚   â”œâ”€â”€ Settings Button
â”‚   â”œâ”€â”€ Preview Button
â”‚   â””â”€â”€ Publish Button
â”œâ”€â”€ FieldPaletteComponent (sidebar)
â”œâ”€â”€ FormCanvasComponent (center)
â””â”€â”€ RowLayoutSidebarComponent (sidebar)
```

[Source: docs/prd/epic-20-form-styling-theme-system.md#integration-with-existing-ui]

**Service Layer:**

```
ThemeDropdownComponent
  â†’ ThemesApiService (HTTP calls)
    â†’ ApiClient (core/api/api.client.ts)
      â†’ HttpClient (Angular built-in)

FormBuilderComponent
  â†’ FormBuilderService (form state)
    â†’ ThemesApiService (theme application tracking)
```

**Standalone Component Pattern:** All components are standalone (no NgModules):

```typescript
@Component({
  selector: 'app-theme-card',
  standalone: true,
  imports: [CommonModule, PrimeNGModule],
  template: `...`,
  changeDetection: ChangeDetectionStrategy.OnPush,
})
export class ThemeCardComponent {}
```

[Source: frontend-architecture.md#component-template]

**Alignment with Existing Architecture:**

- Theme components follow same pattern as FieldPaletteComponent, RowLayoutSidebarComponent
- Uses existing ApiClient service for HTTP requests
- Integrates into existing FormBuilderComponent toolbar
- No structural conflicts, seamless integration

**No Structural Conflicts Detected:** Theme dropdown integrates cleanly into existing form builder
UI. All components follow established patterns.

## Testing

### Testing Standards

- **Test file location:** Co-located with components (\*.component.spec.ts files) [Source:
  testing-strategy.md#frontend-tests]
- **Test standards:** Use Angular TestBed, Jasmine spies for mocks, ChangeDetectionStrategy.OnPush
  testing patterns [Source: testing-strategy.md#frontend-component-test]
- **Testing frameworks:** Karma + Jasmine for unit tests, Jest 29+ for integration tests [Source:
  tech-stack.md]
- **Specific testing requirements:**
  - Test component rendering with various input states
  - Test user interactions (clicks, keyboard events)
  - Test API service integration with mocked HTTP
  - Test responsive layout behavior
  - Coverage requirement: 80%+ for both components
  - Test keyboard navigation (arrow keys, Enter, Escape)
  - Test lazy image loading and skeleton display

### Test Execution Commands

```bash
# Run all frontend tests
npm --workspace=apps/web run test

# Run theme dropdown tests only
npm --workspace=apps/web run test -- --include="**/theme-dropdown/**/*.spec.ts" --watch=false

# Run with coverage
npm --workspace=apps/web run test -- --coverage

# Watch mode for development
npm --workspace=apps/web run test -- --include="**/theme-dropdown/**/*.spec.ts"

# Lint theme dropdown components
npm --workspace=apps/web run lint -- src/app/features/tools/components/form-builder/theme-dropdown/

# Typecheck frontend
npm --workspace=apps/web run typecheck
```

[Source: CLAUDE.md#testing-commands]

## Change Log

| Date       | Version | Description         | Author       |
| ---------- | ------- | ------------------- | ------------ |
| 2025-10-15 | 1.0     | Story draft created | Scrum Master |

## Dev Agent Record

### Agent Model Used

_To be filled by dev agent during implementation_

### Debug Log References

_To be filled by dev agent during implementation_

### Completion Notes List

_To be filled by dev agent during implementation_

### File List

_To be filled by dev agent during implementation_

## QA Results

_To be filled by QA agent after implementation review_

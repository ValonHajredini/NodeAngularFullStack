# Story 12.2: Background Image Element

**Epic:** Epic 12 - Advanced Canvas Elements & Background Customization
**Status:** Approved
**Story Points:** 6
**Priority:** Medium
**Created:** 2025-10-07
**Depends On:** Epic 10 (Form Builder Foundation), Epic 6 (DigitalOcean Avatar Storage - optional)

---

## User Story

**As a** form creator,
**I want** to add background images to my forms with customizable positioning and opacity,
**So that** I can create visually appealing, branded forms that match my organization's style.

---

## Story Context

### Existing System Integration

**Integrates with:**
- `FormFieldType` enum in `packages/shared/src/types/forms.types.ts`
- `FieldPaletteComponent` for palette entry
- `FormCanvasComponent` for canvas rendering
- `FormBuilderService` for state management
- Optional: Existing avatar upload service pattern (`UsersController.uploadAvatar`) if available
- Backend: `FormsController`, `FormSchemaRepository` for schema persistence

**Technology Stack:**
- Frontend: Angular 20+ standalone components, PrimeNG 17+ (FileUpload), Tailwind CSS
- Backend: Express.js with TypeScript, PostgreSQL 15+
- File Storage: DigitalOcean Spaces (S3-compatible) - optional integration
- Image handling: Browser File API, base64 encoding for preview

**Follows Pattern:**
- Field type pattern: Add to enum, extend interface with metadata
- Non-input field: Similar to DIVIDER type (no form submission data)
- Canvas background: Apply CSS `background-image` to canvas preview area
- File upload: Follow existing avatar upload pattern if Epic 6 is complete

**Touch Points:**
- `packages/shared/src/types/forms.types.ts`: Add `BACKGROUND_IMAGE` field type
- `field-palette.component.ts`: Add BACKGROUND_IMAGE with `pi-image` icon
- `form-canvas.component.ts`: Apply background image to canvas element
- `field-properties.component.ts`: Create image configuration panel
- `form-renderer.component.ts`: Apply background to public form
- Backend validators: Accept BACKGROUND_IMAGE type

---

## Acceptance Criteria

1. ✅ BACKGROUND_IMAGE type available in field palette with image icon (`pi-image`)
2. ✅ Users can upload image file OR enter image URL
3. ✅ Image applies to canvas preview area with configured positioning
4. ✅ Positioning controls work correctly:
   - Background size: Cover, Contain, Repeat
   - Opacity slider (0-100%)
   - Alignment: Top, Center, Bottom
5. ✅ Background image persists in form schema metadata
6. ✅ Published forms display background image with configured settings
7. ✅ Integration tests verify image upload and storage (if file upload implemented)
8. ✅ Image preview updates in real-time as properties change

---

## Tasks / Subtasks

- [ ] **Task 1: Extend Shared Package Types** (AC: 1, 5)
  - [ ] Add `BACKGROUND_IMAGE = 'background-image'` to `FormFieldType` enum in `packages/shared/src/types/forms.types.ts`
  - [ ] Extend `FormField.metadata` interface with background image properties:
    ```typescript
    imageUrl?: string;
    imagePosition?: 'cover' | 'contain' | 'repeat';
    imageOpacity?: number; // 0-100
    imageAlignment?: 'top' | 'center' | 'bottom';
    ```
  - [ ] Add JSDoc documentation for background image metadata fields
  - [ ] Build shared package: `npm --workspace=packages/shared run build`
  - [ ] Verify TypeScript compilation succeeds
  - [ ] Run typecheck: `npm --workspace=packages/shared run typecheck`

- [ ] **Task 2: Add BACKGROUND_IMAGE to Field Palette** (AC: 1)
  - [ ] Open `field-palette.component.ts`
  - [ ] Add BACKGROUND_IMAGE field type to `fieldTypes` array:
    ```typescript
    { type: FormFieldType.BACKGROUND_IMAGE, icon: 'pi-image', label: 'Background Image' }
    ```
  - [ ] Position in "Layout/Styling" section (near DIVIDER, GROUP)
  - [ ] Verify icon displays correctly in palette
  - [ ] Test: Click emits `fieldSelected` event with `FormFieldType.BACKGROUND_IMAGE`

- [ ] **Task 3: Create Background Image Properties Panel** (AC: 2, 4)
  - [ ] Open `field-properties.component.ts`
  - [ ] Add `BACKGROUND_IMAGE` case to property panel switching logic
  - [ ] Create properties section with:
    - **Image Source** section:
      - Text input for `imageUrl` (label: "Image URL", placeholder: "https://...")
      - OR File upload button using PrimeNG FileUpload component
      - Preview thumbnail showing current image
    - **Position & Size** section:
      - Dropdown for `imagePosition`: Cover, Contain, Repeat
      - Dropdown for `imageAlignment`: Top, Center, Bottom
    - **Opacity** section:
      - Slider for `imageOpacity` (0-100%) using PrimeNG Slider
      - Display current opacity percentage
  - [ ] Bind all inputs to `field.metadata` properties via `FormBuilderService`
  - [ ] Add real-time preview: Changes reflect immediately in canvas
  - [ ] Validate image URL format (http/https URL or data URL)
  - [ ] Handle file upload: Convert to base64 or upload to DigitalOcean Spaces

- [ ] **Task 4: Implement Image Upload Logic (Optional)** (AC: 2, 7)
  - [ ] Check if Epic 6 (DigitalOcean Avatar Storage) is implemented
  - [ ] If available, reuse avatar upload pattern:
    - Create `uploadFormImage()` method in FormsApiService
    - Call backend endpoint similar to `/api/users/avatar`
    - Store uploaded image URL in `field.metadata.imageUrl`
  - [ ] If not available, use base64 encoding for preview:
    - Read file using FileReader API
    - Convert to base64 data URL
    - Store data URL in `field.metadata.imageUrl`
    - Add note in metadata: `"imageUploadTodo": true` for future backend integration
  - [ ] Add file size validation: Maximum 5MB
  - [ ] Add file type validation: Accept image/* only (jpg, png, gif, webp)
  - [ ] Show upload progress indicator

- [ ] **Task 5: Apply Background Image to Form Canvas** (AC: 3, 8)
  - [ ] Open `form-canvas.component.ts`
  - [ ] Add computed signal to extract background image field from form fields:
    ```typescript
    protected backgroundImage = computed(() => {
      const bgField = this.formBuilderService.formFields()
        .find(f => f.type === FormFieldType.BACKGROUND_IMAGE);
      return bgField?.metadata || null;
    });
    ```
  - [ ] Modify canvas template to apply background styles:
    ```html
    <div class="form-canvas"
         [style.background-image]="getBackgroundImageStyle()"
         [style.background-size]="backgroundImage()?.imagePosition || 'cover'"
         [style.background-position]="backgroundImage()?.imageAlignment || 'center'"
         [style.opacity]="(backgroundImage()?.imageOpacity || 100) / 100">
    ```
  - [ ] Implement `getBackgroundImageStyle()` method:
    - Return `url(${imageUrl})` if `imageUrl` exists
    - Handle both HTTP URLs and data URLs
  - [ ] Add semi-transparent overlay if opacity < 100%
  - [ ] Ensure form fields remain readable over background image
  - [ ] Add CSS to prevent background from affecting field containers

- [ ] **Task 6: Handle Multiple Background Images** (AC: 5)
  - [ ] Decide on multi-background support:
    - Option A: Only one BACKGROUND_IMAGE allowed per form (recommended)
    - Option B: Support multiple backgrounds with z-index layering
  - [ ] If Option A (single background):
    - Update `FormBuilderService` to prevent adding multiple BACKGROUND_IMAGE fields
    - Show warning if attempting to add second background image
    - Remove existing background when new one is added
  - [ ] If Option B (multiple backgrounds):
    - Implement layering logic with z-index
    - Allow configuring layer order
    - Composite backgrounds with CSS layers

- [ ] **Task 7: Update Backend Schema Validation** (AC: 5)
  - [ ] Open `apps/api/src/validators/forms.validator.ts`
  - [ ] Add `'background-image'` to allowed `FormFieldType` values
  - [ ] Add validation rules for background image metadata:
    ```typescript
    body('schema.fields.*.metadata.imageUrl')
      .optional()
      .isString()
      .matches(/^(https?:\/\/|data:image\/)/)
      .withMessage('Image URL must be valid HTTP/HTTPS URL or data URL'),

    body('schema.fields.*.metadata.imagePosition')
      .optional()
      .isIn(['cover', 'contain', 'repeat'])
      .withMessage('Image position must be cover, contain, or repeat'),

    body('schema.fields.*.metadata.imageOpacity')
      .optional()
      .isInt({ min: 0, max: 100 })
      .withMessage('Image opacity must be integer between 0-100'),

    body('schema.fields.*.metadata.imageAlignment')
      .optional()
      .isIn(['top', 'center', 'bottom'])
      .withMessage('Image alignment must be top, center, or bottom'),
    ```
  - [ ] Update JSDoc comments with background image validation rules

- [ ] **Task 8: Implement Form Renderer Background** (AC: 6)
  - [ ] Open `form-renderer.component.ts`
  - [ ] Extract background image field from published schema
  - [ ] Apply background styles to public form container:
    ```html
    <div class="form-renderer"
         [style.background-image]="backgroundImageUrl ? 'url(' + backgroundImageUrl + ')' : 'none'"
         [style.background-size]="backgroundPosition"
         [style.background-position]="backgroundAlignment"
         [style.opacity]="backgroundOpacity / 100">
    ```
  - [ ] Ensure form fields have sufficient contrast over background
  - [ ] Add optional semi-transparent overlay for readability
  - [ ] Test on mobile devices: Ensure background scales appropriately

- [ ] **Task 9: Write Unit Tests** (AC: 7, 8)
  - [ ] Update `field-properties.component.spec.ts`
    - Test: Background image properties panel renders
    - Test: Image URL input updates `field.metadata.imageUrl`
    - Test: Position dropdown updates `field.metadata.imagePosition`
    - Test: Opacity slider updates `field.metadata.imageOpacity`
    - Test: Alignment dropdown updates `field.metadata.imageAlignment`
  - [ ] Update `form-canvas.component.spec.ts`
    - Test: Background image applies to canvas when field exists
    - Test: Background styles update when metadata changes
    - Test: Canvas remains functional without background image
  - [ ] Update `form-builder.service.spec.ts` (if single background enforced)
    - Test: Service prevents adding multiple BACKGROUND_IMAGE fields
  - [ ] Create `form-renderer.component.spec.ts` tests
    - Test: Public form renders with background image
    - Test: Background styles apply correctly
  - [ ] Run tests: `npm --workspace=apps/web run test -- --include="**/field-properties.component.spec.ts" --watch=false`

- [ ] **Task 10: Integration Testing** (AC: 2, 6, 7)
  - [ ] Test full workflow:
    1. Add BACKGROUND_IMAGE from palette
    2. Configure background with URL
    3. Adjust position, opacity, alignment
    4. Preview updates in real-time
    5. Save form
    6. Reload form - verify background persists
    7. Publish form
    8. View public form - verify background renders
  - [ ] Test file upload workflow (if implemented):
    1. Upload image file (jpg, png)
    2. Verify upload succeeds and URL is stored
    3. Verify image displays in canvas
    4. Save and reload - verify image persists
  - [ ] Test edge cases:
    - Invalid image URL (404 error)
    - Large image files (>5MB)
    - Non-image file types
    - Background with 0% opacity (invisible)
    - Background with 100% opacity (fully visible)

- [ ] **Task 11: Build and Quality Checks**
  - [ ] Build shared package: `npm --workspace=packages/shared run build`
  - [ ] Build frontend: `npm --workspace=apps/web run build`
  - [ ] Run linter: `npm --workspace=apps/web run lint`
  - [ ] Run typecheck: `npm --workspace=apps/web run typecheck`
  - [ ] Fix any linting or type errors
  - [ ] Verify backend validation tests pass: `npm --workspace=apps/api run test -- --testPathPattern="forms.validator"`

---

## Dev Notes

### Previous Story Insights
[Source: Epic 10 completion, Story 12.1]
- Form Builder uses signals for reactive UI updates
- Non-input field types (like DIVIDER) don't participate in form submission
- Shared types require package rebuild before frontend/backend changes
- PrimeNG components: FileUpload, Slider, Dropdown used for property panels
- Canvas styling applies to container, not individual field previews

### Data Models
[Source: packages/shared/src/types/forms.types.ts]

**FormFieldType Enum Extension:**
```typescript
export enum FormFieldType {
  // ... existing types
  BACKGROUND_IMAGE = 'background-image',
}
```

**FormField Interface Extensions:**
```typescript
export interface FormField {
  id: string;
  type: FormFieldType;
  label: string; // Not displayed for BACKGROUND_IMAGE
  fieldName: string; // Generated automatically
  metadata?: {
    // ... existing metadata
    // Background Image properties:
    imageUrl?: string; // HTTP/HTTPS URL or base64 data URL
    imagePosition?: 'cover' | 'contain' | 'repeat';
    imageOpacity?: number; // 0-100
    imageAlignment?: 'top' | 'center' | 'bottom';
  };
}
```

### Component Specifications
[Source: docs/architecture/frontend-architecture.md]

**Background Image Properties Panel Structure:**
```typescript
// In FieldPropertiesComponent
<div *ngIf="field.type === FormFieldType.BACKGROUND_IMAGE" class="properties-section">
  <div class="mb-4">
    <label class="text-sm font-medium">Image Source</label>
    <input
      type="text"
      pInputText
      [(ngModel)]="field.metadata.imageUrl"
      placeholder="https://example.com/image.jpg"
      class="w-full" />
    <p-fileUpload
      mode="basic"
      accept="image/*"
      [maxFileSize]="5000000"
      [auto]="true"
      (onUpload)="onImageUploaded($event)"
      chooseLabel="Upload Image" />
  </div>

  <div class="mb-4">
    <label class="text-sm font-medium">Background Size</label>
    <p-dropdown
      [(ngModel)]="field.metadata.imagePosition"
      [options]="positionOptions"
      placeholder="Select position" />
  </div>

  <div class="mb-4">
    <label class="text-sm font-medium">Opacity: {{ field.metadata.imageOpacity }}%</label>
    <p-slider
      [(ngModel)]="field.metadata.imageOpacity"
      [min]="0"
      [max]="100" />
  </div>

  <div class="mb-4">
    <label class="text-sm font-medium">Alignment</label>
    <p-dropdown
      [(ngModel)]="field.metadata.imageAlignment"
      [options]="alignmentOptions"
      placeholder="Select alignment" />
  </div>
</div>
```

**File Location:** Modified in existing `field-properties.component.ts`

### API Specifications
[Source: docs/architecture/backend-architecture.md]

**Optional Image Upload Endpoint (if Epic 6 available):**
- Endpoint: `POST /api/forms/:formId/upload-image`
- Auth: JWT required (form owner only)
- Request: `multipart/form-data` with image file
- Response: `{ success: true, data: { imageUrl: string } }`
- Storage: DigitalOcean Spaces with public-read ACL
- Validation: Max 5MB, image MIME types only

**Schema Validation:**
Existing form endpoints accept BACKGROUND_IMAGE type:
- `POST /api/forms` - Create with background
- `PUT /api/forms/:id` - Update with background
- `POST /api/forms/:id/publish` - Publish with background

### File Locations
[Source: docs/architecture/unified-project-structure.md]

**Modified Files:**
- `packages/shared/src/types/forms.types.ts` - Type definitions
- `apps/web/src/app/features/tools/components/form-builder/field-palette/field-palette.component.ts` - Add palette entry
- `apps/web/src/app/features/tools/components/form-builder/field-properties/field-properties.component.ts` - Properties panel
- `apps/web/src/app/features/tools/components/form-builder/form-canvas/form-canvas.component.ts` - Canvas background
- `apps/web/src/app/features/tools/components/form-builder/forms-api.service.ts` - Optional upload method
- `apps/web/src/app/features/public/form-renderer/form-renderer.component.ts` - Public form background
- `apps/api/src/validators/forms.validator.ts` - Backend validation

**New Files (optional):**
- `apps/api/src/controllers/forms.controller.ts` - Add `uploadFormImage()` method if file upload implemented

### Testing Requirements
[Source: docs/architecture/testing-strategy.md]

**Frontend Unit Tests:**
- Location: Co-located `*.spec.ts` files
- Framework: Jasmine + Karma
- Run: `npm --workspace=apps/web run test -- --include="**/field-properties.component.spec.ts" --watch=false`

**Test Coverage:**
- Properties panel renders background image controls
- Image URL binding updates field metadata
- Position/opacity/alignment controls update metadata
- Canvas applies background styles from metadata
- Public form renderer displays background correctly

**Integration Tests:**
- Full workflow: add background, configure, save, publish, view
- File upload workflow (if implemented)
- Invalid image URL handling
- Large file rejection (>5MB)

### Technical Constraints
[Source: docs/architecture/tech-stack.md, docs/architecture/coding-standards.md]

**Image Handling:**
- Support both HTTP URLs and base64 data URLs
- File size limit: 5MB maximum
- Accepted formats: jpg, png, gif, webp (image/*)
- Preview optimization: Scale down large images for canvas preview

**CSS Background Properties:**
- `background-image`: url() or data URL
- `background-size`: cover (default), contain, repeat
- `background-position`: top, center (default), bottom
- `opacity`: 0-100% (converted to 0.0-1.0 for CSS)

**Performance Considerations:**
- Large images may slow canvas rendering - add loading indicator
- Consider lazy loading for published forms
- Optimize uploaded images (resize/compress) if backend upload implemented

**Security:**
- Validate image URLs to prevent XSS (no javascript: URLs)
- Sanitize file uploads (check MIME type, not just extension)
- Use Content Security Policy for external images
- Store uploaded images with random filenames to prevent enumeration

---

## Testing

### Unit Testing Standards
[Source: docs/architecture/testing-strategy.md]

**Test File Location:** Co-located with components

**Testing Framework:** Jasmine + Karma with Angular Testing Library

**Required Test Cases:**

1. **FieldPropertiesComponent:**
   - Background image properties panel renders for BACKGROUND_IMAGE type
   - Image URL input binds to `field.metadata.imageUrl`
   - Position dropdown binds to `field.metadata.imagePosition`
   - Opacity slider binds to `field.metadata.imageOpacity` (0-100)
   - Alignment dropdown binds to `field.metadata.imageAlignment`
   - File upload triggers image processing (if implemented)

2. **FormCanvasComponent:**
   - Canvas applies background-image style when BACKGROUND_IMAGE field exists
   - Background updates in real-time when metadata changes
   - Canvas renders correctly without background image (default state)
   - Background styles (position, opacity, alignment) apply correctly

3. **FormRendererComponent:**
   - Public form displays background image from published schema
   - Background styles (position, opacity, alignment) match configuration
   - Form remains readable with various background opacities

**Test Execution:**
```bash
npm --workspace=apps/web run test -- --include="**/field-properties.component.spec.ts" --watch=false
npm --workspace=apps/web run test -- --include="**/form-canvas.component.spec.ts" --watch=false
npm --workspace=apps/web run test -- --include="**/form-renderer.component.spec.ts" --watch=false
```

### Integration Testing
- Test complete background image workflow: add, configure, save, publish, view
- Test file upload with valid and invalid files
- Verify background persists after form reload
- Test edge cases: missing image URL, 404 errors, invalid URLs

---

## Change Log

| Date       | Version | Description                      | Author        |
|------------|---------|----------------------------------|---------------|
| 2025-10-07 | 1.0     | Initial story draft created      | Scrum Master  |

---

## Dev Agent Record

*This section will be populated by the development agent during implementation.*

### Agent Model Used
*To be filled by dev agent*

### Debug Log References
*To be filled by dev agent*

### Completion Notes
*To be filled by dev agent*

### File List
*To be filled by dev agent*

---

## QA Results

### Review Date: 2025-10-07

### Reviewed By: Quinn (Test Architect)

### Gate Status: FAIL ⛔

**Gate File:** [docs/qa/gates/12.2-background-image-element.yml](docs/qa/gates/12.2-background-image-element.yml)

### Review Outcome

**This story cannot be reviewed at this time due to blocking conditions.**

The review process requires the story to be in "Review" status with completed implementation, but this story is currently in "Approved" status with no evidence of implementation.

### Blocking Conditions Identified

1. **❌ Story Status:** Currently "Approved" - must be "Review" for QA assessment
2. **❌ File List Empty:** No implementation files listed - cannot verify what was built
3. **❌ Dev Agent Record Empty:** Missing completion notes, model used, debug log references
4. **❌ No Test Evidence:** Cannot locate or verify test implementation
5. **❌ All Tasks Unchecked:** No indication of task completion

### Story Quality Assessment

**Positive Aspects:**
- ✅ **Excellent Documentation:** Story is exceptionally well-written with comprehensive task breakdown
- ✅ **Clear Acceptance Criteria:** 8 specific, testable acceptance criteria defined
- ✅ **Detailed Technical Specs:** Data models, component specifications, API specs all documented
- ✅ **Security Awareness:** Story explicitly addresses security concerns (XSS, MIME validation, CSP)
- ✅ **Testing Requirements:** Unit and integration testing requirements clearly specified
- ✅ **Dependency Management:** Clear dependencies on Epic 10 and optional Epic 6

**Areas Requiring Attention:**

1. **Implementation Required:**
   - Add BACKGROUND_IMAGE to FormFieldType enum (packages/shared/src/types/forms.types.ts)
   - Extend FormField.metadata interface with image properties
   - Update field palette, properties panel, canvas, and renderer components
   - Implement backend validation for new field type

2. **Testing Required (as specified in story):**
   - Unit tests for field properties component
   - Unit tests for form canvas component
   - Unit tests for form renderer component
   - Integration tests for full workflow
   - Edge case testing (invalid URLs, large files, etc.)

3. **Security Implementation Required:**
   - Image URL validation (prevent javascript: protocol XSS)
   - File upload validation (MIME type checking, not just extensions)
   - File size limits (5MB maximum as specified)
   - CSP compatibility for external images

4. **Documentation Required After Implementation:**
   - Populate File List with all modified/created files
   - Complete Dev Agent Record (model, debug logs, completion notes)
   - Update story status to reflect actual state

### Risk Profile

**Security Risk: HIGH** ⚠️
- Image URLs can be XSS vectors if not properly validated
- File uploads require MIME type validation and size limits
- External images need CSP considerations
- Base64 data URLs in form schema could cause injection issues

**Performance Risk: MEDIUM** ⚠️
- Large background images could slow canvas rendering
- Base64 encoding increases form schema size significantly
- Public forms need lazy loading consideration

**Implementation Complexity: MEDIUM**
- Well-defined scope with existing patterns to follow
- Non-input field type (similar to DIVIDER) reduces complexity
- CSS-based implementation is straightforward
- File upload is optional based on Epic 6 availability

### Requirements Traceability

**Coverage Gaps:** All 8 acceptance criteria lack test coverage

| AC# | Acceptance Criteria | Test Coverage | Status |
|-----|-------------------|---------------|--------|
| AC1 | BACKGROUND_IMAGE available in palette with image icon | ❌ Not implemented | Gap |
| AC2 | Upload image file OR enter image URL | ❌ Not implemented | Gap |
| AC3 | Image applies to canvas with positioning | ❌ Not implemented | Gap |
| AC4 | Positioning controls work (size, opacity, alignment) | ❌ Not implemented | Gap |
| AC5 | Background persists in form schema | ❌ Not implemented | Gap |
| AC6 | Published forms display background | ❌ Not implemented | Gap |
| AC7 | Integration tests verify upload and storage | ❌ Not implemented | Gap |
| AC8 | Real-time preview updates | ❌ Not implemented | Gap |

### Compliance Check

- **Coding Standards:** ⚠️ Cannot assess - no code to review
- **Project Structure:** ⚠️ Cannot assess - no files created yet
- **Testing Strategy:** ❌ FAIL - No tests implemented
- **All ACs Met:** ❌ FAIL - No ACs implemented

### Recommendations

**Immediate Actions (Required Before Re-Review):**

1. **Complete Implementation:**
   - Follow the excellent task breakdown provided (Tasks 1-11)
   - Build shared package after type changes
   - Implement all frontend components
   - Add backend validation rules

2. **Implement Required Tests:**
   - Unit tests (Task 9): field-properties, form-canvas, form-renderer specs
   - Integration tests (Task 10): Full workflow testing
   - Run tests and ensure they pass

3. **Security Implementation:**
   - Validate image URLs: `matches(/^(https?:\/\/|data:image\/)/)`
   - Add MIME type checking for file uploads
   - Implement 5MB file size limit
   - Test XSS prevention (reject javascript: URLs)

4. **Update Story Documentation:**
   - Add all modified files to File List section
   - Complete Dev Agent Record section
   - Change status to "Review" when ready for QA

5. **Build and Quality Checks:**
   - Run linter and fix all issues
   - Run typecheck and resolve errors
   - Ensure all tests pass before requesting re-review

**Future Enhancements (Post-Implementation):**

- Consider DigitalOcean Spaces integration (Epic 6)
- Add image optimization/compression for uploads
- Implement lazy loading for published forms
- Add image cropping/editing capabilities

### Next Steps

**Before requesting QA re-review:**

1. ✅ Change story status from "Approved" to "In Progress"
2. ✅ Complete all implementation tasks (1-11)
3. ✅ Write and pass all unit tests
4. ✅ Write and pass all integration tests
5. ✅ Run quality checks (lint, typecheck, build)
6. ✅ Populate File List with all modified files
7. ✅ Complete Dev Agent Record section
8. ✅ Change story status to "Review"
9. ✅ Request QA review again with `*review 12.2`

### Recommended Status

**❌ Changes Required - Implementation Needed**

This story is not ready for "Done" status. It requires full implementation, testing, and documentation updates before it can be reviewed for completion.

---

**Quality Score:** 0/100 (cannot assess without implementation)

**Estimated Re-Review Time:** Full comprehensive review once implemented (~2-3 hours for thorough test architecture assessment)

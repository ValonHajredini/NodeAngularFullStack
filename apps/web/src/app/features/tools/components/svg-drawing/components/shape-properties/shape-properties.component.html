<div class="shape-properties-panel">
  @if (selectedShape()) {
    <p-panel header="Shape Properties" [toggleable]="false">
      <!-- Shape Type -->
      <div class="mb-4">
        <label class="block text-sm font-medium text-gray-700 mb-2">Type</label>
        <div class="text-gray-900">{{ getShapeTypeName() }}</div>
      </div>

      <!-- Stroke Color -->
      <div class="mb-4">
        <label class="block text-sm font-medium text-gray-700 mb-2">Stroke Color</label>
        <div class="flex items-center gap-2">
          <p-colorPicker
            [(ngModel)]="strokeColor"
            (onChange)="onStrokeColorChange(strokeColor)"
            [inline]="false"
            appendTo="body"
          >
          </p-colorPicker>
          <input
            type="text"
            [(ngModel)]="strokeColor"
            (change)="onStrokeColorChange(strokeColor)"
            class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
            placeholder="#000000"
          />
        </div>
      </div>

      <!-- Stroke Width -->
      <div class="mb-4">
        <label class="block text-sm font-medium text-gray-700 mb-2">
          Stroke Width: {{ strokeWidth }}px
        </label>
        <p-slider
          [(ngModel)]="strokeWidth"
          (onChange)="onStrokeWidthChange(strokeWidth)"
          [min]="1"
          [max]="10"
          [step]="1"
          styleClass="w-full"
        >
        </p-slider>
      </div>

      <!-- Fill Color (Polygons only) -->
      @if (selectedShape()?.type === 'polygon') {
        <div class="mb-4">
          <div class="flex items-center mb-2">
            <p-checkbox
              [(ngModel)]="hasFill"
              (onChange)="onFillToggle(hasFill)"
              [binary]="true"
              inputId="fill-checkbox"
            >
            </p-checkbox>
            <label for="fill-checkbox" class="ml-2 text-sm font-medium text-gray-700">
              Fill Color
            </label>
          </div>

          @if (hasFill) {
            <div class="flex items-center gap-2 mt-2">
              <p-colorPicker
                [(ngModel)]="fillColor"
                (onChange)="onFillColorChange(fillColor)"
                [inline]="false"
                appendTo="body"
              >
              </p-colorPicker>
              <input
                type="text"
                [(ngModel)]="fillColor"
                (change)="onFillColorChange(fillColor)"
                class="flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm"
                placeholder="#FF0000"
              />
            </div>
          }
        </div>
      }

      <!-- Shape Info -->
      <div class="mt-6 pt-4 border-t border-gray-200">
        @if (selectedShape()) {
          <p class="text-xs text-gray-500">ID: {{ selectedShape()!.id.substring(0, 8) }}...</p>
          <p class="text-xs text-gray-500 mt-1">
            Created: {{ selectedShape()!.createdAt | date: 'short' }}
          </p>
        }
      </div>
    </p-panel>
  } @else {
    <p-panel header="Shape Properties" [toggleable]="false">
      <div class="text-center py-8 text-gray-500">
        <i class="pi pi-info-circle text-4xl mb-3"></i>
        <p>Select a shape to view and edit its properties</p>
      </div>
    </p-panel>
  }
</div>

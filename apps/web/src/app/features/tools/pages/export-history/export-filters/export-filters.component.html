<div class="export-filters-container">
  <div class="filters-grid">
    <!-- Status Filter (Multi-Select) -->
    <div class="filter-field">
      <label for="status-filter" class="filter-label">Status</label>
      <p-multiSelect
        inputId="status-filter"
        [options]="statusOptions"
        [(ngModel)]="selectedStatuses"
        (ngModelChange)="onStatusChange($event)"
        optionLabel="label"
        optionValue="value"
        placeholder="All Statuses"
        [showClear]="true"
        [filter]="false"
        display="chip"
        styleClass="filter-multiselect"
      >
        <ng-template pTemplate="selectedItems" let-value>
          @if (value && value.length > 0) {
            <div class="selected-items-display">
              {{ value.length }} {{ value.length === 1 ? 'status' : 'statuses' }} selected
            </div>
          } @else {
            <span>All Statuses</span>
          }
        </ng-template>
      </p-multiSelect>
    </div>

    <!-- Tool Type Filter (Dropdown) -->
    <div class="filter-field">
      <label for="tool-type-filter" class="filter-label">Tool Type</label>
      <p-select
        inputId="tool-type-filter"
        [options]="toolTypeOptions"
        [(ngModel)]="selectedToolType"
        (ngModelChange)="onToolTypeChange($event)"
        optionLabel="label"
        optionValue="value"
        placeholder="All Tool Types"
        [showClear]="true"
        styleClass="filter-dropdown"
      />
    </div>

    <!-- Start Date Filter (Calendar) -->
    <div class="filter-field">
      <label for="start-date-filter" class="filter-label">Start Date</label>
      <p-datepicker
        inputId="start-date-filter"
        [(ngModel)]="selectedStartDate"
        (ngModelChange)="onStartDateChange($event)"
        placeholder="Select start date"
        [showIcon]="true"
        dateFormat="yy-mm-dd"
        [maxDate]="selectedEndDate() || undefined"
        styleClass="filter-calendar"
      />
    </div>

    <!-- End Date Filter (Calendar) -->
    <div class="filter-field">
      <label for="end-date-filter" class="filter-label">End Date</label>
      <p-datepicker
        inputId="end-date-filter"
        [(ngModel)]="selectedEndDate"
        (ngModelChange)="onEndDateChange($event)"
        placeholder="Select end date"
        [showIcon]="true"
        dateFormat="yy-mm-dd"
        [minDate]="selectedStartDate() || undefined"
        styleClass="filter-calendar"
      />
    </div>
  </div>

  <!-- Clear All Filters Button -->
  <div class="filter-actions">
    @if (hasActiveFilters()) {
      <button
        pButton
        type="button"
        label="Clear All Filters"
        icon="pi pi-filter-slash"
        class="p-button-outlined p-button-secondary p-button-sm"
        (click)="onClearAllClick()"
      ></button>
    }
  </div>
</div>

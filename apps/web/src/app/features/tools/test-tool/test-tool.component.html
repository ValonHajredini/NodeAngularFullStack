<!-- Test Tool Component Template -->
<div class="test-tool-container p-3">
  <!-- Toast for notifications -->
  <p-toast></p-toast>

  <!-- Header Section -->
  <div class="flex justify-content-between align-items-center mb-4">
    <div>
      <h1 class="text-3xl font-bold text-gray-800 m-0 mb-2">Test Tool</h1>
      <p class="text-gray-600 m-0">A test tool for integration testing</p>
    </div>
    <p-button
      label="New"
      icon="pi pi-plus"
      (onClick)="onCreate()"
      [disabled]="loading()"
    ></p-button>
  </div>

  <!-- Loading State -->
  @if (loading()) {
    <div class="flex justify-content-center align-items-center p-5">
      <p-progressSpinner
        styleClass="w-4rem h-4rem"
        strokeWidth="4"
        animationDuration="1s"
      ></p-progressSpinner>
    </div>
  }

  <!-- Error State -->
  @if (error() && !loading()) {
    <div class="mb-3">
      <p-message severity="error" [text]="error()!" styleClass="w-full"></p-message>
      <div class="mt-2">
        <p-button
          label="Retry"
          icon="pi pi-refresh"
          (onClick)="onRetry()"
          severity="secondary"
          size="small"
        ></p-button>
      </div>
    </div>
  }

  <!-- Empty State -->
  @if (!loading() && !error() && items().length === 0) {
    <div class="text-center p-5">
      <p-message
        severity="info"
        text="No test tool items found. Create your first one to get started!"
        styleClass="w-full"
      ></p-message>
    </div>
  }

  <!-- Data Grid (Responsive) -->
  @if (!loading() && !error() && items().length > 0) {
    <div class="grid">
      @for (item of items(); track item.id) {
        <div class="col-12 md:col-6 lg:col-4">
          <p-card>
            <ng-template pTemplate="header">
              <div class="flex align-items-center justify-content-between p-3">
                <div class="flex align-items-center gap-2">
                  <i class="pi-box text-2xl text-primary"></i>
                  <span class="font-semibold text-lg">{{ item.name || 'Untitled' }}</span>
                </div>
              </div>
            </ng-template>

            <div class="test-tool-item-content">
              <p class="text-gray-600 mb-3">
                {{ item.description || 'No description available' }}
              </p>

              <!-- Metadata -->
              <div class="text-sm text-gray-500">
                <div class="flex align-items-center gap-2 mb-1">
                  <i class="pi pi-calendar text-xs"></i>
                  <span>Created: {{ item.createdAt | date: 'short' }}</span>
                </div>
                @if (item.updatedAt) {
                  <div class="flex align-items-center gap-2">
                    <i class="pi pi-clock text-xs"></i>
                    <span>Updated: {{ item.updatedAt | date: 'short' }}</span>
                  </div>
                }
              </div>
            </div>

            <ng-template pTemplate="footer">
              <div class="flex gap-2 justify-content-end">
                <p-button
                  label="Edit"
                  icon="pi pi-pencil"
                  size="small"
                  (onClick)="onEdit(item)"
                  severity="secondary"
                  [outlined]="true"
                ></p-button>
                <p-button
                  label="Delete"
                  icon="pi pi-trash"
                  size="small"
                  (onClick)="onDelete(item)"
                  severity="danger"
                  [outlined]="true"
                ></p-button>
              </div>
            </ng-template>
          </p-card>
        </div>
      }
    </div>
  }
</div>

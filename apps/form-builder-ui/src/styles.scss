/* You can add global styles to this file, and also import other style files */

/* Theme System - Must be imported first */
@use './styles/theme.scss';

/* Form Theme Variables - Epic 20 */
@import './styles/theme-variables.css';

/* Tailwind CSS imports */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* PrimeIcons */
@import 'primeicons/primeicons.css';

/* Quill Editor Styles */
@import 'quill/dist/quill.core.css';
@import 'quill/dist/quill.snow.css';

/* Enhanced Global Styles with Theme Variables */
html {
  scroll-behavior: smooth;
  color-scheme: light; /* Force light theme only */
}

body {
  margin: 0;
  font-family: var(--font-family-sans);
  background-color: var(--color-background);
  color: var(--color-text-primary);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  transition: var(--transition-colors);
}

* {
  box-sizing: border-box;
}

/* ==========================================================================
   Theme-Powered Utility Classes
   ========================================================================== */

/* Override Tailwind utilities with theme variables */
@layer utilities {
  /* Background Colors */
  .bg-gray-50 {
    background-color: var(--color-gray-50) !important;
  }
  .bg-gray-100 {
    background-color: var(--color-gray-100) !important;
  }
  .bg-gray-200 {
    background-color: var(--color-gray-200) !important;
  }
  .bg-gray-800 {
    background-color: var(--color-gray-800) !important;
  }
  .bg-white {
    background-color: var(--color-surface) !important;
  }

  .bg-primary-50 {
    background-color: var(--color-primary-50) !important;
  }
  .bg-primary-100 {
    background-color: var(--color-primary-100) !important;
  }
  .bg-primary-600 {
    background-color: var(--color-primary-600) !important;
  }
  .bg-primary-700 {
    background-color: var(--color-primary-700) !important;
  }

  .bg-error-50 {
    background-color: var(--color-error-50) !important;
  }
  .bg-error-100 {
    background-color: var(--color-error-100) !important;
  }
  .bg-error-200 {
    background-color: var(--color-error-200) !important;
  }

  .bg-blue-50 {
    background-color: var(--color-info-50) !important;
  }
  .bg-blue-100 {
    background-color: var(--color-info-100) !important;
  }
  .bg-blue-200 {
    background-color: var(--color-info-200) !important;
  }

  .bg-green-100 {
    background-color: var(--color-success-100) !important;
  }
  .bg-green-200 {
    background-color: var(--color-success-200) !important;
  }

  /* Text Colors */
  .text-gray-900 {
    color: var(--color-text-primary) !important;
  }
  .text-gray-800 {
    color: var(--color-gray-800) !important;
  }
  .text-gray-700 {
    color: var(--color-gray-700) !important;
  }
  .text-gray-600 {
    color: var(--color-text-secondary) !important;
  }
  .text-gray-500 {
    color: var(--color-text-muted) !important;
  }
  .text-gray-400 {
    color: var(--color-gray-400) !important;
  }
  .text-white {
    color: var(--color-text-inverse) !important;
  }

  .text-primary-600 {
    color: var(--color-primary-600) !important;
  }
  .text-primary-500 {
    color: var(--color-primary-500) !important;
  }
  .text-primary-700 {
    color: var(--color-primary-700) !important;
  }

  .text-error-400 {
    color: var(--color-error-400) !important;
  }
  .text-error-500 {
    color: var(--color-error-500) !important;
  }
  .text-error-600 {
    color: var(--color-error-600) !important;
  }
  .text-error-700 {
    color: var(--color-error-700) !important;
  }
  .text-error-800 {
    color: var(--color-error-800) !important;
  }

  .text-blue-600 {
    color: var(--color-info-600) !important;
  }
  .text-blue-700 {
    color: var(--color-info-700) !important;
  }
  .text-blue-800 {
    color: var(--color-info-800) !important;
  }

  .text-green-500 {
    color: var(--color-success-500) !important;
  }
  .text-green-800 {
    color: var(--color-success-800) !important;
  }

  .text-red-500 {
    color: var(--color-error-500) !important;
  }

  /* Border Colors */
  .border-gray-300 {
    border-color: var(--color-border) !important;
  }
  .border-gray-200 {
    border-color: var(--color-border-light) !important;
  }
  .border-gray-100 {
    border-color: var(--color-gray-100) !important;
  }
  .border-blue-100 {
    border-color: var(--color-info-100) !important;
  }
  .border-blue-200 {
    border-color: var(--color-info-200) !important;
  }
  .border-primary-500 {
    border-color: var(--color-primary-500) !important;
  }
  .border-error-500 {
    border-color: var(--color-error-500) !important;
  }
  .border-transparent {
    border-color: transparent !important;
  }

  /* Hover Colors */
  .hover\:text-gray-900:hover {
    color: var(--color-text-primary) !important;
  }
  .hover\:text-gray-700:hover {
    color: var(--color-gray-700) !important;
  }
  .hover\:text-gray-600:hover {
    color: var(--color-gray-600) !important;
  }
  .hover\:text-gray-500:hover {
    color: var(--color-text-muted) !important;
  }
  .hover\:text-primary-500:hover {
    color: var(--color-primary-500) !important;
  }
  .hover\:text-blue-800:hover {
    color: var(--color-info-800) !important;
  }

  .hover\:bg-primary-700:hover {
    background-color: var(--color-primary-700) !important;
  }
  .hover\:bg-gray-100:hover {
    background-color: var(--color-gray-100) !important;
  }
  .hover\:bg-gray-50:hover {
    background-color: var(--color-gray-50) !important;
  }
  .hover\:bg-blue-200:hover {
    background-color: var(--color-info-200) !important;
  }
  .hover\:bg-green-200:hover {
    background-color: var(--color-success-200) !important;
  }
  .hover\:bg-gray-200:hover {
    background-color: var(--color-gray-200) !important;
  }

  .hover\:border-gray-300:hover {
    border-color: var(--color-border) !important;
  }
  .hover\:underline:hover {
    text-decoration: underline !important;
  }

  /* Focus Colors */
  .focus\:outline-none:focus {
    outline: none !important;
  }
  .focus\:ring-primary-500:focus {
    outline: 2px solid var(--color-focus-ring) !important;
    outline-offset: 2px !important;
  }
  .focus\:border-primary-500:focus {
    border-color: var(--color-primary-500) !important;
  }
  .focus\:ring-2:focus {
    outline-width: 2px !important;
  }
  .focus\:ring-offset-2:focus {
    outline-offset: 2px !important;
  }
  .focus\:ring-inset:focus {
    outline-offset: -2px !important;
  }

  /* Spacing - Padding */
  .p-1 {
    padding: var(--spacing-1) !important;
  }
  .p-2 {
    padding: var(--spacing-2) !important;
  }
  .p-3 {
    padding: var(--spacing-3) !important;
  }
  .p-4 {
    padding: var(--spacing-4) !important;
  }
  .p-6 {
    padding: var(--spacing-6) !important;
  }
  .px-2 {
    padding-left: var(--spacing-2) !important;
    padding-right: var(--spacing-2) !important;
  }
  .px-3 {
    padding-left: var(--spacing-3) !important;
    padding-right: var(--spacing-3) !important;
  }
  .px-4 {
    padding-left: var(--spacing-4) !important;
    padding-right: var(--spacing-4) !important;
  }
  .px-6 {
    padding-left: var(--spacing-6) !important;
    padding-right: var(--spacing-6) !important;
  }
  .py-2 {
    padding-top: var(--spacing-2) !important;
    padding-bottom: var(--spacing-2) !important;
  }
  .py-3 {
    padding-top: var(--spacing-3) !important;
    padding-bottom: var(--spacing-3) !important;
  }
  .py-4 {
    padding-top: var(--spacing-4) !important;
    padding-bottom: var(--spacing-4) !important;
  }
  .py-12 {
    padding-top: var(--spacing-12) !important;
    padding-bottom: var(--spacing-12) !important;
  }
  .pt-1 {
    padding-top: var(--spacing-1) !important;
  }
  .pt-2 {
    padding-top: var(--spacing-2) !important;
  }
  .pt-4 {
    padding-top: var(--spacing-4) !important;
  }
  .pb-3 {
    padding-bottom: var(--spacing-3) !important;
  }
  .pl-3 {
    padding-left: var(--spacing-3) !important;
  }
  .pr-3 {
    padding-right: var(--spacing-3) !important;
  }
  .pr-4 {
    padding-right: var(--spacing-4) !important;
  }
  .pr-10 {
    padding-right: var(--spacing-10) !important;
  }

  /* Spacing - Margin */
  .m-0 {
    margin: 0 !important;
  }
  .ml-1 {
    margin-left: var(--spacing-1) !important;
  }
  .ml-2 {
    margin-left: var(--spacing-2) !important;
  }
  .ml-3 {
    margin-left: var(--spacing-3) !important;
  }
  .mr-1 {
    margin-right: var(--spacing-1) !important;
  }
  .mr-2 {
    margin-right: var(--spacing-2) !important;
  }
  .mr-3 {
    margin-right: var(--spacing-3) !important;
  }
  .mt-1 {
    margin-top: var(--spacing-1) !important;
  }
  .mt-2 {
    margin-top: var(--spacing-2) !important;
  }
  .mt-3 {
    margin-top: var(--spacing-3) !important;
  }
  .mt-6 {
    margin-top: var(--spacing-6) !important;
  }
  .mt-8 {
    margin-top: var(--spacing-8) !important;
  }
  .mb-0 {
    margin-bottom: 0 !important;
  }
  .mb-3 {
    margin-bottom: var(--spacing-3) !important;
  }
  .-ml-1 {
    margin-left: calc(var(--spacing-1) * -1) !important;
  }

  /* Spacing - Gap */
  .space-y-1 > :not([hidden]) ~ :not([hidden]) {
    margin-top: var(--spacing-1) !important;
  }
  .space-y-3 > :not([hidden]) ~ :not([hidden]) {
    margin-top: var(--spacing-3) !important;
  }
  .space-y-4 > :not([hidden]) ~ :not([hidden]) {
    margin-top: var(--spacing-4) !important;
  }
  .space-y-6 > :not([hidden]) ~ :not([hidden]) {
    margin-top: var(--spacing-6) !important;
  }
  .space-y-8 > :not([hidden]) ~ :not([hidden]) {
    margin-top: var(--spacing-8) !important;
  }

  /* Border Radius */
  .rounded {
    border-radius: var(--border-radius-base) !important;
  }
  .rounded-md {
    border-radius: var(--border-radius-md) !important;
  }
  .rounded-lg {
    border-radius: var(--border-radius-lg) !important;
  }
  .rounded-full {
    border-radius: var(--border-radius-full) !important;
  }

  /* Border Width */
  .border {
    border-width: var(--border-width-1) !important;
  }
  .border-b {
    border-bottom-width: var(--border-width-1) !important;
  }
  .border-b-2 {
    border-bottom-width: var(--border-width-2) !important;
  }
  .border-l-4 {
    border-left-width: var(--border-width-4) !important;
  }
  .border-t {
    border-top-width: var(--border-width-1) !important;
  }

  /* Box Shadow */
  .shadow-lg {
    box-shadow: var(--shadow-lg) !important;
  }
  .shadow-md {
    box-shadow: var(--shadow-md) !important;
  }

  /* Font Sizes */
  .text-xs {
    font-size: var(--font-size-xs) !important;
    line-height: var(--line-height-normal) !important;
  }
  .text-sm {
    font-size: var(--font-size-sm) !important;
    line-height: var(--line-height-normal) !important;
  }
  .text-base {
    font-size: var(--font-size-base) !important;
    line-height: var(--line-height-normal) !important;
  }
  .text-lg {
    font-size: var(--font-size-lg) !important;
    line-height: var(--line-height-normal) !important;
  }
  .text-xl {
    font-size: var(--font-size-xl) !important;
    line-height: var(--line-height-normal) !important;
  }
  .text-3xl {
    font-size: var(--font-size-3xl) !important;
    line-height: var(--line-height-tight) !important;
  }

  /* Font Weights */
  .font-medium {
    font-weight: var(--font-weight-medium) !important;
  }
  .font-bold {
    font-weight: var(--font-weight-bold) !important;
  }
  .font-extrabold {
    font-weight: var(--font-weight-extrabold) !important;
  }

  /* Transitions */
  .transition-colors {
    transition: var(--transition-colors) !important;
  }

  /* Animation Utilities */
  .animate-spin {
    animation: spin 1s linear infinite !important;
  }
  .animate-fade-in {
    animation: fadeIn var(--transition-duration-300) var(--transition-timing-in-out) !important;
  }

  @keyframes spin {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
}

/* ==========================================================================
   Tool Card Button Height Fix
   ========================================================================== */

/* Fix height inconsistency between toggle button and action buttons */
::ng-deep .status-toggle-button-small .p-togglebutton,
::ng-deep .status-toggle-button-small button.p-togglebutton,
::ng-deep .status-toggle-button-small .p-button-label {
  height: 2.5rem !important;
  min-height: 2.5rem !important;
  max-height: 2.5rem !important;
}

::ng-deep .status-toggle-button-small .p-togglebutton {
  padding: 0.5rem 0.75rem !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  font-size: 0.875rem !important;
  line-height: 1.25rem !important;
  white-space: nowrap !important;
  vertical-align: middle !important;
  box-sizing: border-box !important;
}

::ng-deep .status-toggle-button-small .p-togglebutton .p-button-label {
  padding: 0 !important;
  margin: 0 !important;
  line-height: 1.25rem !important;
  font-size: 0.875rem !important;
  display: flex !important;
  align-items: center !important;
}

::ng-deep .status-toggle-button-small .p-togglebutton .p-button-icon {
  font-size: 0.875rem !important;
  line-height: 1.25rem !important;
}

/* Ensure all action buttons in tool card footer have consistent height */
::ng-deep .tool-card-footer .p-button,
::ng-deep .tool-card-footer button.p-button {
  height: 2.5rem !important;
  min-height: 2.5rem !important;
  max-height: 2.5rem !important;
  width: 2.5rem !important;
  min-width: 2.5rem !important;
  max-width: 2.5rem !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  padding: 0 !important;
  vertical-align: middle !important;
  box-sizing: border-box !important;
}

::ng-deep .tool-card-footer {
  display: flex !important;
  align-items: center !important;
  gap: 0.5rem !important;
  min-height: 2.5rem !important;
}

/* ==========================================================================
   Quill Rich Text Editor Styles
   ========================================================================== */

/* Quill editor container */
::ng-deep .quill-editor-wrapper {
  .ql-container {
    min-height: 200px;
    max-height: 400px;
    overflow-y: auto;
    font-family: var(--font-family-sans);
    font-size: 14px;
    line-height: 1.6;
  }

  .ql-editor {
    min-height: 200px;
    max-height: 400px;
    padding: 12px;
  }

  /* Toolbar styling */
  .ql-toolbar {
    background-color: var(--color-gray-50);
    border: 1px solid var(--color-border);
    border-bottom: none;
    border-radius: var(--border-radius-base) var(--border-radius-base) 0 0;
    padding: 8px;
  }

  .ql-container {
    border: 1px solid var(--color-border);
    border-radius: 0 0 var(--border-radius-base) var(--border-radius-base);
  }

  /* Toolbar button styling */
  .ql-toolbar button {
    width: 28px;
    height: 28px;
    padding: 4px;
    margin-right: 4px;
    border-radius: var(--border-radius-base);
    transition: var(--transition-colors);

    &:hover {
      background-color: var(--color-gray-100);
    }

    &.ql-active {
      background-color: var(--color-primary-100);
      color: var(--color-primary-600);
    }
  }

  /* Placeholder styling */
  .ql-editor.ql-blank::before {
    color: var(--color-text-muted);
    font-style: italic;
  }

  /* Focus state */
  .ql-container.ql-snow {
    &:focus-within {
      border-color: var(--color-primary-500);
      box-shadow: 0 0 0 1px var(--color-primary-500);
    }
  }
}

/* ==========================================================================
   Text Block Content - Overflow and Word Wrapping
   ========================================================================== */

/* Apply overflow and word-wrapping to text block containers and content */
.text-block-field,
.text-block-display,
.text-block-content {
  overflow: hidden;
  word-wrap: break-word;
  overflow-wrap: break-word;
}

/* Text block field - start content from left edge */
.text-block-field {
  padding-left: 0 !important;
  padding-right: 0 !important;
}

/* Specific prose content styling */
.text-block-content.prose {
  overflow-wrap: break-word;
  word-break: break-word;
}

/* Ensure all child elements respect container width */
.text-block-content.prose * {
  max-width: 100%;
}

/* Word breaking for common elements */
.text-block-content.prose p,
.text-block-content.prose li,
.text-block-content.prose div {
  overflow-wrap: break-word;
  word-break: break-word;
}

/* ==========================================================================
   Z-Index Fix for PrimeNG Overlays in Modals
   ========================================================================== */

/* Fix z-index layering for PrimeNG components to appear above modal dialogs
   Modal backdrop: 1000
   Modal dialog: 1050
   PrimeNG overlays: 1100+
*/

/* PrimeNG Select dropdown overlay */
::ng-deep .p-select-overlay,
::ng-deep .p-dropdown-panel,
::ng-deep .p-select-panel {
  z-index: 1100 !important;
}

/* PrimeNG DatePicker overlay */
::ng-deep .p-datepicker,
::ng-deep .p-calendar-overlay,
::ng-deep .p-datepicker-panel {
  z-index: 1100 !important;
}

/* PrimeNG MultiSelect overlay */
::ng-deep .p-multiselect-panel {
  z-index: 1100 !important;
}

/* PrimeNG AutoComplete overlay */
::ng-deep .p-autocomplete-panel {
  z-index: 1100 !important;
}

/* PrimeNG Menu/ContextMenu overlay */
::ng-deep .p-menu-overlay,
::ng-deep .p-contextmenu {
  z-index: 1100 !important;
}

/* PrimeNG OverlayPanel */
::ng-deep .p-overlaypanel {
  z-index: 1100 !important;
}

/* PrimeNG Tooltip */
::ng-deep .p-tooltip {
  z-index: 1150 !important;
}

/* Ensure modal dialogs have appropriate z-index */
::ng-deep .p-dialog-mask {
  z-index: 1000 !important;
}

::ng-deep .p-dialog {
  z-index: 1050 !important;
}

/* Ensure modal content doesn't clip overlays */
::ng-deep .p-dialog-content {
  overflow: visible !important;
}

/* Sidebar z-index (should be below modals) */
::ng-deep .p-sidebar {
  z-index: 900 !important;
}

::ng-deep .p-sidebar-mask {
  z-index: 850 !important;
}
